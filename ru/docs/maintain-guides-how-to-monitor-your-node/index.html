<!doctype html>
<html lang="ru" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/ru/blog/rss.xml" title="Polkadot Wiki Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/ru/blog/atom.xml" title="Polkadot Wiki Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Polkadot Wiki" href="/ru/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Work+Sans:400,700&display=swap">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.js"></script>
<script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js" onload="addBackToTop()" defer="defer"></script>
<script src="/js/custom.js"></script>
<script src="/js/klaro-config.js"></script>
<script src="/js/klaro.js"></script>
<script src="/js/packaged/addressChanger.js"></script>
<script src="/js/clipboard.min.js"></script>
<script src="/js/copycode.js"></script><title data-react-helmet="true">Monitor your node | Polkadot Wiki</title><meta data-react-helmet="true" property="og:url" content="https://nam-hle.github.io/polkadot-wiki/ru/docs/maintain-guides-how-to-monitor-your-node"><meta data-react-helmet="true" name="docsearch:language" content="ru"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Monitor your node | Polkadot Wiki"><meta data-react-helmet="true" name="description" content="This guide will walk you through how to set up Prometheus with"><meta data-react-helmet="true" property="og:description" content="This guide will walk you through how to set up Prometheus with"><link data-react-helmet="true" rel="shortcut icon" href="/ru/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://nam-hle.github.io/polkadot-wiki/ru/docs/maintain-guides-how-to-monitor-your-node"><link data-react-helmet="true" rel="alternate" href="https://nam-hle.github.io/polkadot-wiki/docs/maintain-guides-how-to-monitor-your-node" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://nam-hle.github.io/polkadot-wiki/ru/docs/maintain-guides-how-to-monitor-your-node" hreflang="ru"><link data-react-helmet="true" rel="alternate" href="https://nam-hle.github.io/polkadot-wiki/docs/maintain-guides-how-to-monitor-your-node" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/ru/assets/css/styles.8f4d51fa.css">
<link rel="preload" href="/ru/assets/js/runtime~main.ff53ec8c.js" as="script">
<link rel="preload" href="/ru/assets/js/main.b8c9df67.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_3wvD">Перейти к основному содержимому</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ru/"><img src="/ru/img/logo_polkadot_wiki.svg" alt="Logo" class="themedImage_Ir0T themedImage--light_2_E0 navbar__logo"><img src="/ru/img/logo_polkadot_wiki.svg" alt="Logo" class="themedImage_Ir0T themedImage--dark_2JiM navbar__logo"></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/ru/docs/getting-started">Get Started</a><a class="navbar__item navbar__link" href="/ru/docs/learn-launch">Learn</a><a class="navbar__item navbar__link" href="/ru/docs/build-index">Build</a><a class="navbar__item navbar__link" href="/ru/docs/maintain-index">Maintain </a><a href="https://guide.kusama.network" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Kusama</a><div class="searchWrapper_36Ie"><button type="button" class="DocSearch DocSearch-Button" aria-label="Поиск"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Поиск</span></span></button></div><a class="navbar__item navbar__link" href="/ru/docs/contributing">Contribute</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Русский</span></span></a><ul class="dropdown__menu"><li><a href="/docs/maintain-guides-how-to-monitor-your-node" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">English</a></li><li><a href="/ru/docs/maintain-guides-how-to-monitor-your-node" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">Русский</a></li><li><a href="https://crowdin.com/project/polkadot-wiki" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help us translate</a></li></ul></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/ru/"><img src="/ru/img/logo_polkadot_wiki.svg" alt="Logo" class="themedImage_Ir0T themedImage--light_2_E0 navbar__logo"><img src="/ru/img/logo_polkadot_wiki.svg" alt="Logo" class="themedImage_Ir0T themedImage--dark_2JiM navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/ru/docs/getting-started">Get Started</a></li><li class="menu__list-item"><a class="menu__link" href="/ru/docs/learn-launch">Learn</a></li><li class="menu__list-item"><a class="menu__link" href="/ru/docs/build-index">Build</a></li><li class="menu__list-item"><a class="menu__link" href="/ru/docs/maintain-index">Maintain </a></li><li class="menu__list-item"><a href="https://guide.kusama.network" target="_blank" rel="noopener noreferrer" class="menu__link">Kusama</a></li><li class="menu__list-item"><a class="menu__link" href="/ru/docs/contributing">Contribute</a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/docs/maintain-guides-how-to-monitor-your-node" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">English</a></li><li class="menu__list-item"><a href="/ru/docs/maintain-guides-how-to-monitor-your-node" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">Русский</a></li><li class="menu__list-item"><a href="https://crowdin.com/project/polkadot-wiki" target="_blank" rel="noopener noreferrer" class="menu__link">Help us translate</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_3jyA"><div class="docSidebarContainer_3jRz" role="complementary"><div class="sidebar_2j-V"><div class="menu menu--responsive thin-scrollbar menu_1Xkn"><button aria-label="Открыть меню" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Vtis" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">General</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/claims">Claims</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/redenomination">Redenomination of DOT</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/grants">Grants</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/thousand-validators">Thousand Validators Programme</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/ambassadors">Polkadot Ambassador Programme</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/research">Research Pages</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/community">Community</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/contributing">Contributing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/contributors">Contributors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/glossary">Glossary</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/ens">Using ENS with DOT/KSM accounts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-ledger">Ledger Application</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-scams">How to Protect Yourself from Scams</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-legitimate-projects">How to Identify Legitimate Projects</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/faq">Frequently Asked Questions (FAQs)</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Learn</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-launch">Polkadot Launch Phases</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Basics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-architecture">Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-accounts">Polkadot Accounts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-account-generation">Account Generation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-account-restore">Backing up and Restoring Accounts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-DOT">DOT</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-security">Security of the network</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-consensus">Polkadot Consensus</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-nominator">Nominator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-validator">Validator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-collator">Collator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-governance">Governance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-identity">Identity</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-balance-transfers">How to transfer Balances</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-transaction-fees">Transaction Fees</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-polkadot-host">Polkadot Host (PH)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-treasury">Treasury</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-registrar">How to use W3F Registrar</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Parachains</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-parachains">Parachains</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-parathreads">Parathreads</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-bridges">Bridges</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-auction">Parachain Slots Auction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-crowdloans">Parachain Crowdloans</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Advanced</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-staking">Staking</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-proxies">Proxy Accounts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-availability">Availability and Validity</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-randomness">Randomness</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-crosschain">Cross-chain Message Passing (XCMP)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-spree">SPREE</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-wasm">WebAssembly (Wasm)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-phragmen">Sequential Phragmén Method</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-simple-payouts">Simple Payouts</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Cryptography</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-cryptography">Cryptography Explainer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-keys">Polkadot Keys</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Polkadot Comparisons</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-kusama-vs-polkadot">Comparing Polkadot and Kusama</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-comparisons-ethereum-2">Ethereum 2.0</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-comparisons-cosmos">Cosmos</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-comparisons">Other comparisons</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Build</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/build-index">Builder&#x27;s Portal</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Development Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/build-build-with-polkadot">Polkadot Builders Starter&#x27;s Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/build-pdk">Parachain Development Kits (PDKs)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/learn-implementers-guide">Parachain Implementer&#x27;s Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/build-cumulus">Cumulus</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/build-parachains-rococo">Rococo Parachain Test Network</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/build-smart-contracts">Smart Contracts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/build-oracle">Oracles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/build-ss58-registry">SS58 Registry</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/build-wallets">Polkadot Wallets</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Integration Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/build-integration">Integration Initiation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/build-protocol-info">Polkadot Protocol</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/build-node-management">Node Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/build-node-interaction">Node Interaction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/build-transaction-construction">Transaction Construction</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Tools</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/build-tools-index">Tool Index</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Resources</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/build-hackathon">Hackathon</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Maintain</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ru/docs/maintain-index">Network Maintainers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ru/docs/maintain-polkadot-parameters">Parameters</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Nodes and Dapps</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/maintain-sync">Set up a Full Node</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/maintain-networks">Networks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/maintain-wss">Set up Secure WebSocket for Remote Connections</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/maintain-errors">Resolving Errors</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Nominator Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/maintain-guides-how-to-nominate-polkadot">How to Nominate on Polkadot</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/maintain-guides-how-to-unbond">Unbonding and Rebonding</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Validator Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ru/docs/maintain-guides-how-to-validate-polkadot">How to run a Validator on Polkadot</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ru/docs/maintain-guides-validator-payout">Validator Payout Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ru/docs/maintain-guides-how-to-systemd">Using systemd for the Validator Node</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ru/docs/maintain-guides-secure-validator">Secure Validator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ru/docs/maintain-guides-how-to-use-polkadot-secure-validator">How to use Polkadot Secure Validator Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ru/docs/maintain-guides-how-to-setup-sentry-node">Set Up a Sentry Node</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ru/docs/maintain-guides-how-to-upgrade">How to Upgrade Your Validator</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/ru/docs/maintain-guides-how-to-monitor-your-node">Monitor your node</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ru/docs/maintain-guides-how-to-chill">How to Chill</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/ru/docs/maintain-guides-how-to-stop-validating">How to Stop Validating</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Governance Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/maintain-guides-democracy">Participate in Democracy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/maintain-guides-how-to-join-council">Join the Council</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/ru/docs/maintain-guides-how-to-vote-councillor">Voting for Councillors</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_28SP"><div class="container padding-vert--lg docItemWrapper_3ZSj"><div class="row"><div class="col docItemCol_1o9i"><div class="docItemContainer_3nUq"><article><header><h1 class="docTitle_33JP">Monitor your node</h1></header><div class="markdown"><p>This guide will walk you through how to set up <a href="https://prometheus.io/" target="_blank" rel="noopener noreferrer">Prometheus</a> with
<a href="https://grafana.com/" target="_blank" rel="noopener noreferrer">Grafana</a> to monitor your node using Ubuntu 18.04 or 20.04.</p><p>A Substrate-based chain exposes data such as the height of the chain, the number of connected peers
to your node, CPU, memory usage of your machine, and more. To monitor this data, Prometheus is used
to collect metrics and Grafana allows for displaying them on the dashboard.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="preparation"></a>Preparation<a class="hash-link" href="#preparation" title="Прямая ссылка на этот заголовок">#</a></h2><p>First, create a user for Prometheus by adding the <code>--no-create-home</code> flag to disallow <code>prometheus</code>
from logging in.</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useradd</span><span class="token plain"> --no-create-home --shell /usr/sbin/nologin prometheus</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>Create the directories required to store the configuration and executable files.</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">mkdir</span><span class="token plain"> /etc/prometheus</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">mkdir</span><span class="token plain"> /var/lib/prometheus</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>Change the ownership of these directories to <code>prometheus</code> so that only prometheus can access them.</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">chown</span><span class="token plain"> -R prometheus:prometheus /etc/prometheus</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">chown</span><span class="token plain"> -R prometheus:prometheus /var/lib/prometheus</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="installing-and-configuring-prometheus"></a>Installing and Configuring Prometheus<a class="hash-link" href="#installing-and-configuring-prometheus" title="Прямая ссылка на этот заголовок">#</a></h2><p>After setting up the environment, update your OS, and install the latest Prometheus. You can check
the latest release by going to their GitHub repository under the
<a href="https://github.com/prometheus/prometheus/releases/" target="_blank" rel="noopener noreferrer">releases</a> page.</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">apt-get</span><span class="token plain"> update </span><span class="token operator" style="color:rgb(0, 92, 197)">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">apt-get</span><span class="token plain"> upgrade</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token function" style="color:rgb(111, 66, 193)">wget</span><span class="token plain"> https://github.com/prometheus/prometheus/releases/download/v2.26.0/prometheus-2.26.0.linux-amd64.tar.gz</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token function" style="color:rgb(111, 66, 193)">tar</span><span class="token plain"> xfz prometheus-*.tar.gz</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(227, 98, 9)">cd</span><span class="token plain"> prometheus-2.26.0.linux-amd64</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>The following two binaries are in the directory:</p><ul><li>prometheus - Prometheus main binary file</li><li>promtool</li></ul><p>The following two directories (which contain the web interface, configuration files examples and the
license) are in the directory:</p><ul><li>consoles</li><li>console_libraries</li></ul><p>Copy the executable files to the <code>/usr/local/bin/</code> directory.</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">cp</span><span class="token plain"> ./prometheus /usr/local/bin/</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">cp</span><span class="token plain"> ./promtool /usr/local/bin/</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>Change the ownership of these files to the <code>prometheus</code> user.</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">chown</span><span class="token plain"> prometheus:prometheus /usr/local/bin/prometheus</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">chown</span><span class="token plain"> prometheus:prometheus /usr/local/bin/promtool</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>Copy the <code>consoles</code> and <code>console_libraries</code> directories to <code>/etc/prometheus</code></p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">cp</span><span class="token plain"> -r ./consoles /etc/prometheus</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">cp</span><span class="token plain"> -r ./console_libraries /etc/prometheus</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>Change the ownership of these directories to the <code>prometheus</code> user.</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">chown</span><span class="token plain"> -R prometheus:prometheus /etc/prometheus/consoles</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">chown</span><span class="token plain"> -R prometheus:prometheus /etc/prometheus/console_libraries</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>Once everything is done, run this command to remove <code>prometheus</code> directory.</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token builtin class-name" style="color:rgb(227, 98, 9)">cd</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">..</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">rm</span><span class="token plain"> -rf prometheus*</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>Before using Prometheus, it needs some configuration. Create a YAML configuration file named
<code>prometheus.yml</code> by running the command below.</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">nano</span><span class="token plain"> /etc/prometheus/prometheus.yml</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>The configuration file is divided into three parts which are <code>global</code>, <code>rule_files</code>, and
<code>scrape_configs</code>.</p><ul><li><p><code>scrape_interval</code> defines how often Prometheus scrapes targets, while <code>evaluation_interval</code>
controls how often the software will evaluate rules.</p></li><li><p><code>rule_files</code> block contains information of the location of any rules we want the Prometheus server
to load.</p></li><li><p><code>scrape_configs</code> contains the information which resources Prometheus monitors.</p></li></ul><p>The configuration file should look like this below:</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token key atrule">global</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token key atrule">scrape_interval</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> 15s</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token key atrule">evaluation_interval</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> 15s</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token key atrule">rule_files</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># - &quot;first.rules&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token comment" style="color:rgb(106, 153, 85)"># - &quot;second.rules&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token key atrule">scrape_configs</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">-</span><span class="token plain"> </span><span class="token key atrule">job_name</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> </span><span class="token string">&quot;prometheus&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token key atrule">scrape_interval</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> 5s</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token key atrule">static_configs</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(36, 41, 46)">-</span><span class="token plain"> </span><span class="token key atrule">targets</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token string">&quot;localhost:9090&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">-</span><span class="token plain"> </span><span class="token key atrule">job_name</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> </span><span class="token string">&quot;substrate_node&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token key atrule">scrape_interval</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> 5s</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token key atrule">static_configs</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(36, 41, 46)">-</span><span class="token plain"> </span><span class="token key atrule">targets</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token string">&quot;localhost:9615&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>With the above configuration file, the first exporter is the one that Prometheus exports to monitor
itself. As we want to have more precise information about the state of the Prometheus server we
reduced the <code>scrape_interval</code> to 5 seconds for this job. The parameters <code>static_configs</code> and
<code>targets</code> determine where the exporters are running. The second exporter is capturing the data from
your node, and the port by default is <code>9615</code>.</p><p>You can check the validity of this configuration file by running
<code>promtool check config /etc/prometheus/prometheus.yml</code>.</p><p>Save the configuration file and change the ownership of the file to <code>prometheus</code> user.</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">chown</span><span class="token plain"> prometheus:prometheus /etc/prometheus/prometheus.yml</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="starting-prometheus"></a>Starting Prometheus<a class="hash-link" href="#starting-prometheus" title="Прямая ссылка на этот заголовок">#</a></h2><p>To test that Prometheus is set up properly, execute the following command to start it as the
<code>prometheus</code> user.</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> -u prometheus /usr/local/bin/prometheus --config.file /etc/prometheus/prometheus.yml --storage.tsdb.path /var/lib/prometheus/ --web.console.templates</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">/etc/prometheus/consoles --web.console.libraries</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">/etc/prometheus/console_libraries</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>The following messages indicate the status of the server. If you see the following messages, your
server is set up properly.</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token assign-left variable" style="color:rgb(156, 220, 254)">level</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ts</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2021</span><span class="token plain">-04-16T19:02:20.167Z </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">caller</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">main.go:380 </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">msg</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token string">&quot;No time or size retention was set so using the default time retention&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">duration</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">15d</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">level</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ts</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2021</span><span class="token plain">-04-16T19:02:20.167Z </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">caller</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">main.go:418 </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">msg</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token string">&quot;Starting Prometheus&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">version</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token string">&quot;(version=2.26.0, branch=HEAD, revision=3cafc58827d1ebd1a67749f88be4218f0bab3d8d)&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">level</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ts</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2021</span><span class="token plain">-04-16T19:02:20.167Z </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">caller</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">main.go:423 </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">build_context</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token string">&quot;(go=go1.16.2, user=root@a67cafebe6d0, date=20210331-11:56:23)&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">level</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ts</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2021</span><span class="token plain">-04-16T19:02:20.167Z </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">caller</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">main.go:424 </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">host_details</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token string">&quot;(Linux 5.4.0-42-generic #46-Ubuntu SMP Fri Jul 10 00:24:02 UTC 2020 x86_64 ubuntu2004 (none))&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">level</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ts</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2021</span><span class="token plain">-04-16T19:02:20.167Z </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">caller</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">main.go:425 </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">fd_limits</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token string">&quot;(soft=1024, hard=1048576)&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">level</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ts</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2021</span><span class="token plain">-04-16T19:02:20.167Z </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">caller</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">main.go:426 </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">vm_limits</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token string">&quot;(soft=unlimited, hard=unlimited)&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">level</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ts</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2021</span><span class="token plain">-04-16T19:02:20.169Z </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">caller</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">web.go:540 </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">component</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">web </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">msg</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token string">&quot;Start listening for connections&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">address</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">0.0</span><span class="token plain">.0.0:9090</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">level</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ts</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2021</span><span class="token plain">-04-16T19:02:20.170Z </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">caller</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">main.go:795 </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">msg</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token string">&quot;Starting TSDB ...&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">level</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ts</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2021</span><span class="token plain">-04-16T19:02:20.171Z </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">caller</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">tls_config.go:191 </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">component</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">web </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">msg</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token string">&quot;TLS is disabled.&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">http2</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">false</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">level</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ts</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2021</span><span class="token plain">-04-16T19:02:20.174Z </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">caller</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">head.go:696 </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">component</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">tsdb </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">msg</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token string">&quot;Replaying on-disk memory mappable chunks if any&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">level</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ts</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2021</span><span class="token plain">-04-16T19:02:20.175Z </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">caller</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">head.go:710 </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">component</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">tsdb </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">msg</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token string">&quot;On-disk memory mappable chunks replay completed&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">duration</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">1</span><span class="token plain">.391446ms</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">level</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ts</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2021</span><span class="token plain">-04-16T19:02:20.175Z </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">caller</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">head.go:716 </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">component</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">tsdb </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">msg</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token string">&quot;Replaying WAL, this may take a while&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">level</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ts</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2021</span><span class="token plain">-04-16T19:02:20.178Z </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">caller</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">head.go:768 </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">component</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">tsdb </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">msg</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token string">&quot;WAL segment loaded&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">segment</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">0</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">maxSegment</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">4</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">level</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ts</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2021</span><span class="token plain">-04-16T19:02:20.193Z </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">caller</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">head.go:768 </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">component</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">tsdb </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">msg</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token string">&quot;WAL segment loaded&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">segment</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">1</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">maxSegment</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">4</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">level</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ts</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2021</span><span class="token plain">-04-16T19:02:20.221Z </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">caller</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">head.go:768 </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">component</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">tsdb </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">msg</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token string">&quot;WAL segment loaded&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">segment</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">maxSegment</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">4</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">level</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ts</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2021</span><span class="token plain">-04-16T19:02:20.224Z </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">caller</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">head.go:768 </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">component</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">tsdb </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">msg</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token string">&quot;WAL segment loaded&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">segment</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">3</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">maxSegment</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">4</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">level</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ts</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2021</span><span class="token plain">-04-16T19:02:20.229Z </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">caller</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">head.go:768 </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">component</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">tsdb </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">msg</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token string">&quot;WAL segment loaded&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">segment</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">4</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">maxSegment</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">4</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">level</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ts</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2021</span><span class="token plain">-04-16T19:02:20.229Z </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">caller</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">head.go:773 </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">component</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">tsdb </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">msg</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token string">&quot;WAL replay completed&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">checkpoint_replay_duration</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">43.716</span><span class="token plain">µs </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">wal_replay_duration</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">53</span><span class="token plain">.973285ms </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">total_replay_duration</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">55</span><span class="token plain">.445308ms</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">level</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ts</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2021</span><span class="token plain">-04-16T19:02:20.233Z </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">caller</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">main.go:815 </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">fs_type</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">EXT4_SUPER_MAGIC</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">level</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ts</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2021</span><span class="token plain">-04-16T19:02:20.233Z </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">caller</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">main.go:818 </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">msg</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token string">&quot;TSDB started&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">level</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ts</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2021</span><span class="token plain">-04-16T19:02:20.233Z </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">caller</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">main.go:944 </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">msg</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token string">&quot;Loading configuration file&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">filename</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">/etc/prometheus/prometheus.yml</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">level</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ts</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2021</span><span class="token plain">-04-16T19:02:20.234Z </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">caller</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">main.go:975 </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">msg</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token string">&quot;Completed loading of configuration file&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">filename</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">/etc/prometheus/prometheus.yml </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">totalDuration</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">824.115</span><span class="token plain">µs </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">remote_storage</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">3.131</span><span class="token plain">µs </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">web_handler</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">401ns </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">query_engine</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">1.056</span><span class="token plain">µs </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">scrape</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">236.454</span><span class="token plain">µs </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">scrape_sd</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">45.432</span><span class="token plain">µs </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">notify</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">723ns </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">notify_sd</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2.61</span><span class="token plain">µs </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">rules</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">956ns</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">level</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">info </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ts</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token number">2021</span><span class="token plain">-04-16T19:02:20.234Z </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">caller</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">main.go:767 </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">msg</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token string">&quot;Server is ready to receive web requests.&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>Go to <code>http://SERVER_IP_ADDRESS:9090/graph</code> to check whether you are able to access the Prometheus
interface or not. If it is working, exit the process by pressing on <code>CTRL + C</code>.</p><p>Next, we would like to automatically start the server during the boot process, so we have to create
a new <code>systemd</code> configuration file with the following config.</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">nano</span><span class="token plain"> /etc/systemd/system/prometheus.service</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">Unit</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">Description</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">Prometheus Monitoring</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">Wants</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">network-online.target</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">After</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">network-online.target</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">Service</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">User</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">prometheus</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">Group</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">prometheus</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">Type</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">simple</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ExecStart</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">/usr/local/bin/prometheus </span><span class="token punctuation" style="color:rgb(36, 41, 46)">\</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  --config.file /etc/prometheus/prometheus.yml </span><span class="token punctuation" style="color:rgb(36, 41, 46)">\</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  --storage.tsdb.path /var/lib/prometheus/ </span><span class="token punctuation" style="color:rgb(36, 41, 46)">\</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  --web.console.templates</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">/etc/prometheus/consoles </span><span class="token punctuation" style="color:rgb(36, 41, 46)">\</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  --web.console.libraries</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">/etc/prometheus/console_libraries</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">ExecReload</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">/bin/kill -HUP </span><span class="token variable" style="color:rgb(156, 220, 254)">$MAINPID</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">Install</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token assign-left variable" style="color:rgb(156, 220, 254)">WantedBy</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain">multi-user.target</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>Once the file is saved, execute the command below to reload <code>systemd</code> and enable the service so that
it will be loaded automatically during the operating system&#x27;s startup.</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> systemctl daemon-reload </span><span class="token operator" style="color:rgb(0, 92, 197)">&amp;&amp;</span><span class="token plain"> systemctl </span><span class="token builtin class-name" style="color:rgb(227, 98, 9)">enable</span><span class="token plain"> prometheus </span><span class="token operator" style="color:rgb(0, 92, 197)">&amp;&amp;</span><span class="token plain"> systemctl start prometheus</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>Prometheus should be running now, and you should be able to access its front again end by
re-visiting <code>IP_ADDRESS:9090/</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="installing-grafana"></a>Installing Grafana<a class="hash-link" href="#installing-grafana" title="Прямая ссылка на этот заголовок">#</a></h2><p>In order to visualize your node metrics, you can use Grafana to query the Prometheus server. Run the
following commands to install it first.</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">install</span><span class="token plain"> -y adduser libfontconfig1</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token function" style="color:rgb(111, 66, 193)">wget</span><span class="token plain"> https://dl.grafana.com/oss/release/grafana_7.5.4_amd64.deb</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> dpkg -i grafana_7.5.4_amd64.deb</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>If everything is fine, configure Grafana to auto-start on boot and then start the service.</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> systemctl daemon-reload</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name" style="color:rgb(227, 98, 9)">enable</span><span class="token plain"> grafana-server</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> systemctl start grafana-server</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>You can now access it by going to the <code>http://SERVER_IP_ADDRESS:3000/login</code>. The default user and
password is admin/admin.</p><blockquote><p>Note: If you want to change the port on which Grafana runs (3000 is a popular port), edit the file
<code>/usr/share/grafana/conf/defaults.ini</code> with a command like
<code>sudo vim /usr/share/grafana/conf/defaults.ini</code> and change the <code>http_port</code> value to something
else. Then restart grafana with <code>sudo systemctl restart grafana-server</code>.</p></blockquote><p><img alt="grafana-1" src="/ru/assets/images/1-grafana-login-c1c6fbd7d08509b83393b50c01bb0616.png"></p><p>In order to visualize the node metrics, click <em>settings</em> to configure the <code>Data Sources</code> first.</p><p><img alt="grafana-1" src="/ru/assets/images/2-add-data-source-d761a4186c463aad357c6130b2881789.png"></p><p>Click <code>Add data source</code> to choose where the data is coming from.</p><p><img alt="grafana-1" src="/ru/assets/images/2-add-data-source-2-1a307a18d157b5a6dcfc5ff9affa9998.png"></p><p>Select <code>Prometheus</code>.</p><p><img alt="grafana-1" src="/ru/assets/images/3-select-prometheus-0791dd096d2ca64c0146121e58f9c3e3.png"></p><p>The only thing you need to input is the <code>URL</code> that is <code>https://localhost:9090</code> and then click
<code>Save &amp; Test</code>. If you see <code>Data source is working</code>, your connection is configured correctly.</p><p><img alt="grafana-1" src="/ru/assets/images/4-configure-data-source-7b1620ce4fc9ab2de90283415cea7df9.png"></p><p>Next, import the dashboard that lets you visualize your node data. Go to the menu bar on the left
and mouse hover &quot;+&quot; then select <code>Import</code>.</p><p><code>Import via grafana.com</code> - It allows you to use a dashboard that someone else has created and made
public. You can check what other dashboards are available via
<a href="https://grafana.com/grafana/dashboards" target="_blank" rel="noopener noreferrer">https://grafana.com/grafana/dashboards</a>. In this guide, we
use <a href="https://grafana.com/grafana/dashboards/12425" target="_blank" rel="noopener noreferrer">&quot;My Polkadot Metrics&quot;</a>, so input &quot;12425&quot; under
the id field and click <code>Load</code>.</p><p><img alt="grafana-1" src="/ru/assets/images/5-import-dashboard-bd891cf2120fb0db67f2227fb173d41e.png"></p><p>Once it has been loaded, make sure to select &quot;Prometheus&quot; in the Prometheus dropdown list. Then
click <code>Import</code>.</p><p><img alt="grafana-1" src="/ru/assets/images/5-import-dashboard-2-6b28bbb32de0537cfac19dcc1f2b2090.png"></p><p>In the meantime, start your Polkadot node by running <code>./polkadot</code>. If everything is done correctly,
you should be able to monitor your node&#x27;s performance such as the current block height, CPU, memory
usage, etc. on the Grafana dashboard.</p><p><img alt="grafana-1" src="/ru/assets/images/6-dashboard-metric-26c7a11df27ed105fabd448e83872c01.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="installing-and-configuring-alertmanager-optional"></a>Installing and Configuring Alertmanager (Optional)<a class="hash-link" href="#installing-and-configuring-alertmanager-optional" title="Прямая ссылка на этот заголовок">#</a></h2><p>In this section, let&#x27;s configure the Alertmanager that helps to predict the potential problem or
notify you of the current problem in your server. Alerts can be sent in Slack, Email, Matrix, or
others. In this guide, we will show you how to configure the email notifications using Gmail if your
node goes down.</p><p>First, download the latest binary of AlertManager and unzip it by running the command below:</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token function" style="color:rgb(111, 66, 193)">wget</span><span class="token plain"> https://github.com/prometheus/alertmanager/releases/download/v0.21.0/alertmanager-0.21.0.linux-amd64.tar.gz</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token function" style="color:rgb(111, 66, 193)">tar</span><span class="token plain"> -xvzf alertmanager-0.21.0.linux-amd64.tar.gz</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token function" style="color:rgb(111, 66, 193)">mv</span><span class="token plain"> alertmanager-0.21.0.linux-amd64.tar.gz/alertmanager /usr/local/bin/</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="gmail-setup"></a>Gmail Setup<a class="hash-link" href="#gmail-setup" title="Прямая ссылка на этот заголовок">#</a></h3><p>To allow AlertManager to send an email to you, you will need to generate something called an
<code>app password</code> in your Gmail account. For details, click
<a href="https://support.google.com/accounts/answer/185833?hl=en" target="_blank" rel="noopener noreferrer">here</a> to follow the whole setup.</p><p>You should see something like below:</p><p><img alt="grafana-am-1" src="/ru/assets/images/1-alert-manager-772a381e44fb289d713129bce0ac1a7e.png"></p><p>Copy and save it somewhere else first.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="alertmanager-configuration"></a>AlertManager Configuration<a class="hash-link" href="#alertmanager-configuration" title="Прямая ссылка на этот заголовок">#</a></h3><p>There is a configuration file named <code>alertmanager.yml</code> inside the directory that you just extracted
in the previous command, but that is not of our use. We will create our <code>alertmanager.yml</code> file
under <code>/etc/alertmanager</code> with the following config.</p><blockquote><p>Ensure to change the ownership of &quot;/etc/alertmanager&quot; to <code>prometheus</code> by executing</p><p>sudo chown -R prometheus:prometheus /etc/alertmanager</p></blockquote><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q yml"><div tabindex="0" class="prism-code language-yml codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token key atrule">global</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"> </span><span class="token key atrule">resolve_timeout</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> 1m</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token key atrule">route</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"> </span><span class="token key atrule">receiver</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> </span><span class="token string">&#x27;gmail-notifications&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token key atrule">receivers</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> </span><span class="token string">&#x27;gmail-notifications&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token key atrule">email_configs</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">-</span><span class="token plain"> </span><span class="token key atrule">to</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> YOUR_EMAIL</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token key atrule">from</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> YOUR_EMAIL</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token key atrule">smarthost</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> smtp.gmail.com</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token number">587</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token key atrule">auth_username</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> YOUR_EMAIL</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token key atrule">auth_identity</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> YOUR_EMAIL</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token key atrule">auth_password</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> YOUR_APP_PASSWORD</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token key atrule">send_resolved</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(0, 92, 197)">true</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>With the above configuration, alerts will be sent using the the email you set above. Remember to
change <code>YOUR_EMAIL</code> to your email and paste the app password you just saved earlier to the
<code>YOUR_APP_PASSWORD</code>.</p><p>Next, create another <code>systemd</code> configuration file named <code>alertmanager.service</code> by running the
command <code>sudo nano /etc/systemd/system/alertmanager.service</code> with the following config.</p><blockquote><p>SERVER_IP - Change to your host IP address amd make sure port 9093 is opened</p></blockquote><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q"><div tabindex="0" class="prism-code language-undefined codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">[Unit]</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">Description=AlertManager Server Service</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">Wants=network-online.target</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">After=network-online.target</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">[Service]</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">User=root</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">Group=root</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">Type=simple</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">ExecStart=/usr/local/bin/alertmanager --config.file /etc/alertmanager/alertmanager.yml --web.external-url=http://SERVER_IP:9093 --cluster.advertise-address=&#x27;0.0.0.0:9093&#x27;</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">[Install]</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">WantedBy=multi-user.target</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>To the start the Alertmanager, run the following commands:</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> systemctl daemon-reload </span><span class="token operator" style="color:rgb(0, 92, 197)">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name" style="color:rgb(227, 98, 9)">enable</span><span class="token plain"> alertmanager </span><span class="token operator" style="color:rgb(0, 92, 197)">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> systemctl start alertmanager </span><span class="token operator" style="color:rgb(0, 92, 197)">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> systemctl status alertmanager</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q"><div tabindex="0" class="prism-code language-undefined codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">● alertmanager.service - AlertManager Server Service</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">   Loaded: loaded (/etc/systemd/system/alertmanager.service; enabled; vendor preset: enabled)</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">   Active: active (running) since Thu 2020-08-20 22:01:21 CEST; 3 days ago</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"> Main PID: 20592 (alertmanager)</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    Tasks: 70 (limit: 9830)</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">   CGroup: /system.slice/alertmanager.service</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>You should see the process status is &quot;active (running)&quot; if you have configured properly.</p><p>There is a Alertmanager plugin in Grafana that can help you to monitor the alert information. To
install it, execute the command below:</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> grafana-cli plugins </span><span class="token function" style="color:rgb(111, 66, 193)">install</span><span class="token plain"> camptocamp-prometheus-alertmanager-datasource</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>And restart Grafana once the plugin is successfully installed.</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> systemctl restart grafana-server</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>Now go to your Grafana dashboard <code>SERVER_IP:3000</code> and configure the Alertmanager datasource.</p><p><img alt="grafana-am-5" src="/ru/assets/images/5-alert-manager-c72c2dc814113f58399347add3c1f884.png"></p><p>Go to Configuration -&gt; Data Sources, search &quot;Prometheus AlertManger&quot; if you cannot find it at the
top.</p><p><img alt="grafana-am-2" src="/ru/assets/images/2-alert-manager-d3e306837b2c64bf91a0cad9af6a7864.png"></p><p>Fill in the <code>URL</code> to your server location followed by the port number used in the Alertmanager.</p><p>Then click &quot;Save &amp; Test&quot; at the bottom to test the connection.</p><p><img alt="grafana-am-3" src="/ru/assets/images/3-alert-manager-1fda12aea0c70f3f6844b52b95331aa8.png"></p><p>To monitor the alerts, let&#x27;s import dashboard &quot;<a href="https://grafana.com/dashboards/8010" target="_blank" rel="noopener noreferrer">8010</a>&quot; that is
used for Alertmanager. And make sure to select the &quot;Prometheus AlertManager&quot; in the last column.
Then click &quot;Import&quot;.</p><p>You will end up having the follwing:</p><p><img alt="grafana-am-4" src="/ru/assets/images/4-alert-manager-85181686515e903e6a4098ddd9575a2f.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2Cjg" id="alertmanager-integration"></a>AlertManager Integration<a class="hash-link" href="#alertmanager-integration" title="Прямая ссылка на этот заголовок">#</a></h3><p>To let the Prometheus server be able to talk to the Alertmanger, we will need to add the following
config in the <code>etc/prometheus/prometheus.yml</code>.</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q yml"><div tabindex="0" class="prism-code language-yml codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token key atrule">rule_files</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">-</span><span class="token plain"> </span><span class="token string">&#x27;rules.yml&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token key atrule">alerting</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token key atrule">alertmanagers</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">-</span><span class="token plain"> </span><span class="token key atrule">static_configs</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">-</span><span class="token plain"> </span><span class="token key atrule">targets</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(36, 41, 46)">-</span><span class="token plain"> localhost</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token number">9093</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>That is the updated <code>etc/prometheus/prometheus.yml</code>.</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q yml"><div tabindex="0" class="prism-code language-yml codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token key atrule">global</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token key atrule">scrape_interval</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain">     15s</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token key atrule">evaluation_interval</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> 15s</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token key atrule">rule_files</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">-</span><span class="token plain"> </span><span class="token string">&#x27;rules.yml&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token key atrule">alerting</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token key atrule">alertmanagers</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">-</span><span class="token plain"> </span><span class="token key atrule">static_configs</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">-</span><span class="token plain"> </span><span class="token key atrule">targets</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(36, 41, 46)">-</span><span class="token plain"> localhost</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token number">9093</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token key atrule">scrape_configs</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">-</span><span class="token plain"> </span><span class="token key atrule">job_name</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> </span><span class="token string">&#x27;prometheus&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token key atrule">scrape_interval</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> 5s</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token key atrule">static_configs</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(36, 41, 46)">-</span><span class="token plain"> </span><span class="token key atrule">targets</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token string">&#x27;localhost:9090&#x27;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">-</span><span class="token plain"> </span><span class="token key atrule">job_name</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> </span><span class="token string">&#x27;substrate_node&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token key atrule">scrape_interval</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> 5s</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token key atrule">static_configs</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(36, 41, 46)">-</span><span class="token plain"> </span><span class="token key atrule">targets</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token string">&#x27;localhost:9615&#x27;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>We will need to create a new file called &quot;rules.yml&quot; under <code>/etc/prometheus/</code> that is defined all
the rules we would like to detect. If any of the rules defined in this file is fulfilled, an alert
will be triggered. The rule below checks whether the instance is down. If it is down for more than 5
minutes, an email notification will be sent. If you would like to learn more about the details of
the rule defining, go
<a href="https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/" target="_blank" rel="noopener noreferrer">here</a>. There are other
interesting alerts you may find useful <a href="https://awesome-prometheus-alerts.grep.to/rules.html" target="_blank" rel="noopener noreferrer">here</a>.</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q yml"><div tabindex="0" class="prism-code language-yml codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token key atrule">groups</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> alert_rules</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token key atrule">rules</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(36, 41, 46)">-</span><span class="token plain"> </span><span class="token key atrule">alert</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> InstanceDown</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token key atrule">expr</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> up == 0</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token key atrule">for</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> 5m</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">          </span><span class="token key atrule">severity</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> critical</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">          </span><span class="token key atrule">summary</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> </span><span class="token string">&quot;Instance [{{ $labels.instance }}] down&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(36, 41, 46)">:</span><span class="token plain"> </span><span class="token string">&quot;[{{ $labels.instance }}] of job [{{ $labels.job }}] has been down for more than 1 minute.&quot;</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>Change the ownership of this file to <code>prometheus</code> instead of <code>root</code> by running:</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">chown</span><span class="token plain"> prometheus:prometheus rules.yml</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>To check the rules defined in the &quot;rules.yml&quot; is syntactically correct, run the following command:</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> -u prometheus promtool check rules rules.yml</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>Finally, restart everthing by running:</p><div class="codeBlockContainer_1ukp"><div class="codeBlockContent_3Y8q bash"><div tabindex="0" class="prism-code language-bash codeBlock_2Xgr thin-scrollbar"><div class="codeBlockLines_3Zfi" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> systemctl restart prometheus </span><span class="token operator" style="color:rgb(0, 92, 197)">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">sudo</span><span class="token plain"> systemctl restart alertmanager</span></div></div></div><button type="button" aria-label="Скопировать в буфер обмена" class="copyButton_1mju">Скопировать</button></div></div><p>Now if one of your target instances down, you will receive an alert on the AlertManager and Gmail
like below.</p><p><img alt="grafana-am-6" src="/ru/assets/images/6-alert-manager-12cff39ab28672b46017b175f875985b.png"></p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/w3f/polkadot-wiki/edit/master/website-v2/../docs/maintain-guides-how-to-monitor-your-node.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_1CBY" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Отредактировать эту страницу</a></div><div class="col text--right"><em><small>Последнее обновление <time datetime="2021-05-22T11:22:52.000Z" class="lastUpdatedDate_Xku4">22.05.2021</time> от <strong>Nam Hoang Le</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Навигация по странице документации"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/ru/docs/maintain-guides-how-to-upgrade"><div class="pagination-nav__sublabel">Предыдущая страница</div><div class="pagination-nav__label">« How to Upgrade Your Validator</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/ru/docs/maintain-guides-how-to-chill"><div class="pagination-nav__sublabel">Следующая страница</div><div class="pagination-nav__label">How to Chill »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3J2a thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#preparation" class="table-of-contents__link">Preparation</a></li><li><a href="#installing-and-configuring-prometheus" class="table-of-contents__link">Installing and Configuring Prometheus</a></li><li><a href="#starting-prometheus" class="table-of-contents__link">Starting Prometheus</a></li><li><a href="#installing-grafana" class="table-of-contents__link">Installing Grafana</a></li><li><a href="#installing-and-configuring-alertmanager-optional" class="table-of-contents__link">Installing and Configuring Alertmanager (Optional)</a><ul><li><a href="#gmail-setup" class="table-of-contents__link">Gmail Setup</a></li><li><a href="#alertmanager-configuration" class="table-of-contents__link">AlertManager Configuration</a></li><li><a href="#alertmanager-integration" class="table-of-contents__link">AlertManager Integration</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="nav-footer spacer-y-4 pb-4" id="footer"><div class="container"><div class="justify-content-start row"><div class="mb-3 mb-md-0 col-md-3 col-6"><h5 class="text-white">General</h5><ul class="list-unstyled"><li class="py-0 py-md-1"><a href="https://polkadot.network/about" class="text-white" target="_blank" rel="noopener noreferrer">About</a></li><li class="py-0 py-md-1"><a href="https://polkadot.network/faq" class="text-white" target="_blank" rel="noopener noreferrer">FAQ</a></li><li class="py-0 py-md-1"><a href="https://polkadot.network/contact" class="text-white" target="_blank" rel="noopener noreferrer">Contact</a></li><li class="py-0 py-md-1"><a href="https://polkadot.network/build" class="text-white" target="_blank" rel="noopener noreferrer">Build</a></li><li class="py-0 py-md-1"><a href="https://github.com/w3f/General-Grants-Program" class="text-white" target="_blank" rel="noopener noreferrer">Grants and Bounties</a></li><li class="py-0 py-md-1"><a href="https://polkadot.network/jobs" class="text-white" target="_blank" rel="noopener noreferrer">Careers</a></li></ul></div><div class="mb-3 mb-md-0 col-md-3 col-6"><h5 class="text-white">Technology</h5><ul class="list-unstyled"><li class="py-0 py-md-1"><a href="https://polkadot.network/technology" class="text-white" target="_blank" rel="noopener noreferrer">Technology</a></li><li class="py-0 py-md-1"><a href="https://polkadot.network/dot-token" class="text-white" target="_blank" rel="noopener noreferrer">Token</a></li><li class="py-0 py-md-1"><a href="https://telemetry.polkadot.io/" class="text-white" target="_blank" rel="noopener noreferrer">Telemetry</a></li><li class="py-0 py-md-1"><a href="https://www.parity.io/substrate" class="text-white" target="_blank" rel="noopener noreferrer">Substrate</a></li><li class="py-0 py-md-1"><a href="https://polkadot.network/PolkaDotPaper.pdf" class="text-white" target="_blank" rel="noopener noreferrer">Whitepaper</a></li><li class="py-0 py-md-1"><a href="https://polkadot.network/Polkadot-lightpaper.pdf" class="text-white" target="_blank" rel="noopener noreferrer">Lightpaper</a></li></ul></div><div class="mb-3 mb-md-0 col-md-3 col-6"><h5 class="text-white">Community</h5><ul class="list-unstyled"><li class="py-0 py-md-1"><a href="https://polkadot.network/community" class="text-white" target="_blank" rel="noopener noreferrer">Community</a></li><li class="py-0 py-md-1"><a href="http://wiki.polkadot.network/en/latest/" class="text-white" target="_blank" rel="noopener noreferrer">Documentation</a></li><li class="py-0 py-md-1"><a href="https://polkadot.network/brand-assets" class="text-white" target="_blank" rel="noopener noreferrer">Brand Assets</a></li><li class="py-0 py-md-1"><a href="https://polkadot.network/blog" class="text-white" target="_blank" rel="noopener noreferrer">Blog</a></li><li class="py-0 py-md-1"><a href="https://app.element.io/#/room/!FdCojkeGzZLSEoiecf:web3.foundation?via=matrix.parity.io&amp;via=matrix.org&amp;via=web3.foundation" class="text-white" target="_blank" rel="noopener noreferrer">Element Chat</a></li><li class="py-0 py-md-1"><a href="https://medium.com/polkadot-network" class="text-white" target="_blank" rel="noopener noreferrer">Medium</a></li></ul></div><div class="px-lg-0 col-md-3"><ul class="list-social-links justify-content-around"><li class="text-white"><a href="https://twitter.com/Polkadot" target="_blank" rel="noopener noreferrer"><i class="socicon-twitter"></i></a></li><li class="text-white"><a href="https://www.reddit.com/r/polkadot" target="_blank" rel="noopener noreferrer"><i class="socicon-reddit"></i></a></li><li class="text-white"><a href="https://github.com/paritytech/polkadot" target="_blank" rel="noopener noreferrer"><i class="socicon-github"></i></a></li><li class="text-white"><a href="https://www.youtube.com/channel/UCB7PbjuZLEba_znc7mEGNgw" target="_blank" rel="noopener noreferrer"><i class="socicon-youtube"></i></a></li><li class="text-white"><a href="https://discord.gg/wGUDt2p" target="_blank" rel="noopener noreferrer"><i class="socicon-discord"></i></a></li></ul><p class="d-block text-white">Subscribe to the newsletter to hear about Polkadot updates and events.</p><button type="button" class="btn btn-primary"><a href="https://info.polkadot.network/subscribe" target="_blank" style="color:white">Subscribe</a></button></div></div><div class="footer-legal align-items-end mt-5 pt-4 row"><div class="mb-2 mb-lg-0 col-lg-2"><a class="navbar-brand" href="https://polkadot.network/" target="_blank" rel="noopener noreferrer"><img src="/ru/img/logo-polkadot-light.svg" alt="Polkadot Network"></a></div><div class="col-lg-10"><ul class="list-unstyled d-flex flex-wrap list-pipe-separator"><li><a href="https://web3.foundation" class="text-white text-small" target="_blank" rel="noopener noreferrer">© 2021 Web3 Foundation</a></li><li><a href="https://polkadot.network/impressum" class="text-white text-small" target="_blank" rel="noopener noreferrer">Impressum</a></li><li><a href="https://polkadot.network/disclaimer" class="text-white text-small" target="_blank" rel="noopener noreferrer">Disclaimer</a></li><li><a href="https://polkadot.network/privacy" class="text-white text-small" target="_blank" rel="noopener noreferrer">Privacy</a></li><li><a class="text-white text-small" href="#" id="cookie-settings">Cookie Settings</a><script>var cookieSettings=document.getElementById("cookie-settings");cookieSettings.onclick=function(){return klaro.show()}</script></li><li><a href="{{ dot_ipfs_pdf_url }}" class="text-white text-small" target="_blank" rel="noopener noreferrer">PDF version</a></li></ul></div></div></div></footer></div>
<script src="/ru/assets/js/runtime~main.ff53ec8c.js"></script>
<script src="/ru/assets/js/main.b8c9df67.js"></script>
</body>
</html>