(self.webpackChunk=self.webpackChunk||[]).push([[9047],{3905:(e,t,a)=>{"use strict";a.d(t,{Zo:()=>p,kt:()=>u});var n=a(67294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),h=c(a),u=o,m=h["".concat(l,".").concat(u)]||h[u]||d[u]||r;return a?n.createElement(m,i(i({ref:t},p),{},{components:a})):n.createElement(m,i({ref:t},p))}));function u(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,i=new Array(r);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var c=2;c<r;c++)i[c]=a[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},59558:(e,t,a)=>{"use strict";a.r(t),a.d(t,{frontMatter:()=>i,metadata:()=>s,toc:()=>l,default:()=>p});var n=a(22122),o=a(19756),r=(a(67294),a(3905)),i={id:"learn-consensus",title:"\u6ce2\u5361\u5171\u8bc6",sidebar_label:"\u6ce2\u5361\u5171\u8bc6",description:"\u5bf9 Polkadot \u548c Kusama \u6240\u7528\u7684\u5171\u8bc6\u89e3\u91ca"},s={unversionedId:"learn-consensus",id:"learn-consensus",isDocsHomePage:!1,title:"\u6ce2\u5361\u5171\u8bc6",description:"\u5bf9 Polkadot \u548c Kusama \u6240\u7528\u7684\u5171\u8bc6\u89e3\u91ca",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/learn-consensus.md",sourceDirName:".",slug:"/learn-consensus",permalink:"/polkadot-wiki/zh-CN/docs/learn-consensus",editUrl:"https://github.com/w3f/polkadot-wiki/edit/master/docs/learn-consensus.md",version:"current",sidebar_label:"\u6ce2\u5361\u5171\u8bc6",frontMatter:{id:"learn-consensus",title:"\u6ce2\u5361\u5171\u8bc6",sidebar_label:"\u6ce2\u5361\u5171\u8bc6",description:"\u5bf9 Polkadot \u548c Kusama \u6240\u7528\u7684\u5171\u8bc6\u89e3\u91ca"},sidebar:"docs",previous:{title:"\u7f51\u7edc\u7684\u5b89\u5168",permalink:"/polkadot-wiki/zh-CN/docs/learn-security"},next:{title:"\u63d0\u540d\u4eba",permalink:"/polkadot-wiki/zh-CN/docs/learn-nominator"}},l=[{value:"\u4e3a\u4ec0\u4e48\u6211\u4eec\u9700\u8981\u5171\u8bc6\u673a\u5236\uff1f",id:"\u4e3a\u4ec0\u4e48\u6211\u4eec\u9700\u8981\u5171\u8bc6\u673a\u5236\uff1f",children:[]},{value:"\u4ec0\u4e48\u662f PoW \u548c PoS\uff1f",id:"\u4ec0\u4e48\u662f-pow-\u548c-pos\uff1f",children:[]},{value:"\u4e3a\u4ec0\u4e48\u4e0d\u4f7f\u7528\u5de5\u4f5c\u91cf\u8bc1\u660e(PoW)?",id:"\u4e3a\u4ec0\u4e48\u4e0d\u4f7f\u7528\u5de5\u4f5c\u91cf\u8bc1\u660epow",children:[]},{value:"\u6982\u7387\u6027 vs \u53ef\u8bc1\u660e\u7684\u6700\u7ec8\u6027",id:"\u6982\u7387\u6027-vs-\u53ef\u8bc1\u660e\u7684\u6700\u7ec8\u6027",children:[]},{value:"\u4ec0\u4e48\u662f GRANDPA / BABE?",id:"\u4ec0\u4e48\u662f-grandpa--babe",children:[{value:"\u6df7\u5408\u5171\u8bc6",id:"\u6df7\u5408\u5171\u8bc6",children:[]},{value:"BABE",id:"babe",children:[]},{value:"GRANDPA: \u6700\u7ec8\u51b3\u5b9a\u6027\u5de5\u5177",id:"grandpa-\u6700\u7ec8\u51b3\u5b9a\u6027\u5de5\u5177",children:[]},{value:"\u5206\u53c9\u9009\u62e9",id:"\u5206\u53c9\u9009\u62e9",children:[]}]},{value:"\u5171\u8bc6\u6bd4\u8f83",id:"\u5171\u8bc6\u6bd4\u8f83",children:[{value:"\u4e2d\u672c\u806a\u5171\u8bc6",id:"\u4e2d\u672c\u806a\u5171\u8bc6",children:[]},{value:"PBFT / Tendermint",id:"pbft--tendermint",children:[]},{value:"Casper FFG",id:"casper-ffg",children:[]}]},{value:"\u8d44\u6e90",id:"\u8d44\u6e90",children:[]}],c={toc:l};function p(e){var t=e.components,i=(0,o.Z)(e,["components"]);return(0,r.kt)("wrapper",(0,n.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"\u4e3a\u4ec0\u4e48\u6211\u4eec\u9700\u8981\u5171\u8bc6\u673a\u5236\uff1f"},"\u4e3a\u4ec0\u4e48\u6211\u4eec\u9700\u8981\u5171\u8bc6\u673a\u5236\uff1f"),(0,r.kt)("p",null,"\u5171\u8bc6\u662f\u4e00\u79cd\u5728\u5171\u4eab\u72b6\u6001\u4e0a\u8fbe\u6210\u534f\u8bae\u7684\u65b9\u6cd5\u3002\u4e3a\u4e86\u4f7f\u533a\u5757\u94fe\u7684\u72b6\u6001\u7ee7\u7eed\u5efa\u7acb\u5e76\u5411\u524d\u8fdb\uff0c\u7f51\u7edc\u4e2d\u7684\u6240\u6709\u8282\u70b9\u5fc5\u987b\u8fbe\u6210\u4e00\u81f4\u5171\u8bc6\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\uff0c\u53bb\u4e2d\u5fc3\u7f51\u7edc\u4e2d\u7684\u8282\u70b9\u53ef\u4ee5\u4fdd\u6301\u5f7c\u6b64\u540c\u6b65\u3002\u5728\u533a\u5757\u94fe\u4e0a\u5982\u679c\u53bb\u4e2d\u5fc3\u5316\u7f51\u7edc\u8282\u70b9\u6ca1\u6709\u5171\u8bc6\uff0c\u5c31\u65e0\u6cd5\u786e\u4fdd\u7531\u5176\u4ed6\u8282\u70b9\u5171\u4eab\u7684\u72b6\u6001 \u662f\u771f\u5b9e\u7684\u3002\u5171\u8bc6\u65e8\u5728\u53c2\u4e0e\u8005\u4e4b\u95f4\u63d0\u4f9b\u72b6\u6001\u7684",(0,r.kt)("em",{parentName:"p"},"\u5ba2\u89c2"),"\u4e8b\u5b9e\uff0c\u6bcf\u4e2a\u53c2\u4e0e\u8005\u5bf9\u7f51\u7edc\u90fd\u6709\u81ea\u5df1\u7684",(0,r.kt)("em",{parentName:"p"},"\u4e3b\u89c2"),"\u89c2\u70b9\u3002\u8fd9\u4e9b\u8282\u70b9\u95f4\u8fdb\u884c\u901a\u4fe1\u7684\u8fc7\u7a0b\u5e76\u8fbe\u6210\u534f\u8bae\u4f7f\u80fd\u591f\u6784\u5efa\u65b0\u533a\u5757\u3002"),(0,r.kt)("h2",{id:"\u4ec0\u4e48\u662f-pow-\u548c-pos\uff1f"},"\u4ec0\u4e48\u662f PoW \u548c PoS\uff1f"),(0,r.kt)("p",null,"\u5de5\u4f5c\u91cf\u8bc1\u660e(PoW) \u548c\u6743\u76ca\u8bc1\u660e(PoS) \u5df2\u88ab\u7528\u6765\u4f5c\u4e3a\u533a\u5757\u94fe\u5171\u8bc6\u673a\u5236\u7684\u7b80\u79f0\uff0c\u4f46\u8fd9\u5e76\u4e0d\u80fd\u5b8c\u6574\u5730\u63cf\u8ff0\u5176\u5168\u8c8c\u3002 PoW\u662f\u8fbe\u6210\u533a\u5757\u521b\u9020\u8005\u5171\u8bc6\u7684\u65b9\u6cd5\uff0c\u4e5f\u662f",(0,r.kt)("a",{parentName:"p",href:"#nakamoto-consensus"},"\u4e2d\u672c\u806a\u5171\u8bc6"),"\u7684\u4e00\u90e8\u5206\uff0c\u8be5\u5171\u8bc6\u8fd8\u5305\u542b\u94fe\u9009\u62e9\u7b97\u6cd5(\u6839\u636e\u6bd4\u7279\u5e01\u4e2d\u6700\u957f\u94fe\u7684\u89c4\u5219)\u3002\u540c\u6837PoS\u662f\u7528\u4e8e\u9009\u62e9\u9a8c\u8bc1\u4eba\u7684\u4e00\u7ec4\u89c4\u5219\u5e76\u4e14\u6ca1\u6709\u6307\u5b9a\u94fe\u7684\u9009\u62e9\u89c4\u5219\u6216\u5982\u4f55\u8fbe\u5230\u94fe\u7684\u7ec8\u70b9\u3002\u4f20\u7edf\u4e0aPoS\u7b97\u6cd5\u5df2\u88ab\u878d\u5408\u5230\u5b9e\u73b0\u8282\u70b9\u4e4b\u95f4\u7684\u62dc\u5360\u5ead\u534f\u8bae\u7684\u7b97\u6cd5\u914d\u5bf9\u3002\u4f8b\u5982",(0,r.kt)("a",{parentName:"p",href:"learn-comparisons-cosmos"},"Tendermint"),"\u662f\u5b9e\u7528\u6027\u62dc\u5360\u5ead\u5bb9\u9519\u7b97\u6cd5\uff0c\u5b83\u4f7f\u7528PoS\u4f5c\u4e3a\u5176\u9a8c\u8bc1\u4eba\u7684\u9009\u62e9\u65b9\u6cd5\u3002"),(0,r.kt)("h2",{id:"\u4e3a\u4ec0\u4e48\u4e0d\u4f7f\u7528\u5de5\u4f5c\u91cf\u8bc1\u660epow"},"\u4e3a\u4ec0\u4e48\u4e0d\u4f7f\u7528\u5de5\u4f5c\u91cf\u8bc1\u660e(PoW)?"),(0,r.kt)("p",null,"\u5c3d\u7ba1\u5728\u4e0b\u4e00\u4e2a\u533a\u5757\u751f\u4ea7\u8005\u8fbe\u6210\u53bb\u4e2d\u5fc3\u5316\u5171\u8bc6\u65b9\u9762\u65e2\u7b80\u5355\u53c8\u6709\u6548\uff0c\u4f46\u4e2d\u672c\u806a\u5171\u8bc6\u5b9e\u73b0\u7684\u5de5\u4f5c\u91cf\u8bc1\u660e\u5374\u6d88\u8017\u4e86\u5927\u91cf\u7684\u80fd\u6e90\uff0c\u6ca1\u6709\u7ecf\u6d4e\u7684\u6216\u53ef\u8bc1\u660e\u7684\u7ec8\u7ed3\u6027\uff0c\u4e5f\u6ca1\u6709\u6709\u6548\u7684\u7b56\u7565\u6765\u62b5\u6297\u5361\u7279\u5c14\u3002"),(0,r.kt)("h2",{id:"\u6982\u7387\u6027-vs-\u53ef\u8bc1\u660e\u7684\u6700\u7ec8\u6027"},"\u6982\u7387\u6027 vs \u53ef\u8bc1\u660e\u7684\u6700\u7ec8\u6027"),(0,r.kt)("p",null,"A pure Nakamoto consensus blockchain that runs PoW is only able to achieve the notion of ",(0,r.kt)("em",{parentName:"p"},"probabilistic finality")," and reach ",(0,r.kt)("em",{parentName:"p"},"eventual consensus"),". Probabilistic finality means that under some assumptions about the network and participants, if we see a few blocks building on a given block, we can estimate the probability that it is final. Eventual consensus means that at some point in the future, all nodes will agree on the truthfulness of one set of data. This eventual consensus may take a long time and will not be able to be determined how long it will take ahead of time. However, finality gadgets such as GRANDPA (GHOST-based Recursive ANcestor Deriving Prefix Agreement) or Ethereum's Casper FFG (the Friendly Finality Gadget) are designed to give stronger and quicker guarantees on the finality of blocks - specifically, that they can never be reverted after some process of Byzantine agreements has taken place. The notion of irreversible consensus is known as ",(0,r.kt)("em",{parentName:"p"},"provable finality.")),(0,r.kt)("p",null,"In the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/w3f/consensus/blob/master/pdf/grandpa.pdf"},"GRANDPA paper"),", it is phrased in this way:"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u5982\u679c\u5728\u6ca1\u6709\u6307\u5b9a\u7684\u65f6\u95f4\u540e\u5411\u6240\u6709\u53c2\u4e0e\u8005\u8fd4\u56de\u76f8\u540c\u7684\u503c\uff0coracle A \u5728\u534f\u8bae\u4e2d\u662f",(0,r.kt)("em",{parentName:"p"},"\u6700\u7ec8\u4e00\u81f4"),"\u3002")),(0,r.kt)("h2",{id:"\u4ec0\u4e48\u662f-grandpa--babe"},"\u4ec0\u4e48\u662f GRANDPA / BABE?"),(0,r.kt)("h3",{id:"\u6df7\u5408\u5171\u8bc6"},"\u6df7\u5408\u5171\u8bc6"),(0,r.kt)("p",null,"There are two protocols we use when we talk about the consensus protocol of Polkadot, GRANDPA and BABE (Blind Assignment for Blockchain Extension). We talk about both of these because Polkadot uses what is known as ",(0,r.kt)("em",{parentName:"p"},"hybrid consensus"),". Hybrid consensus splits up the finality gadget from the block production mechanism."),(0,r.kt)("p",null,'\u8fd9\u662f\u5728 Polkadot \u4e2d\u83b7\u5f97\u6982\u7387\u6700\u7ec8\u6027\uff08\u62e5\u6709\u4ea7\u751f\u65b0\u533a\u5757\u7684\u80fd\u529b\uff09\u548c\u53ef\u8bc1\u660e\u7684\u6700\u7ec8\u6027\uff08\u5728\u89c4\u8303\u94fe\u4e0a\u5177\u6709\u901a\u7528\u534f\u8bae\uff0c\u6ca1\u6709\u4efb\u4f55\u9006\u8f6c\u673a\u4f1a\uff09\u7684\u597d\u5904\u3002\u5b83\u8fd8\u907f\u514d\u4e86\u6bcf\u79cd\u673a\u5236\u7684\u76f8\u5e94\u7f3a\u70b9\uff08\u5728\u6982\u7387\u6700\u7ec8\u6027\u4e2d\u4e0d\u77e5\u4e0d\u89c9\u5730\u9075\u5faa\u4e86\u9519\u8bef\u7684\u5206\u53c9\u7684\u673a\u4f1a\uff0c\u4ee5\u53ca\u5728\u53ef\u8bc1\u660e\u7684\u6700\u7ec8\u6027\u4e2d\u5b58\u5728"\u8fc7\u65f6"\u7684\u53ef\u80fd\u6027- \u65e0\u6cd5\u4ea7\u751f\u65b0\u7684\u533a\u5757\uff09\u3002\u901a\u8fc7\u7ed3\u5408\u8fd9\u4e24\u79cd\u673a\u5236\uff0cPolkadot \u53ef\u4ee5\u5feb\u901f\u751f\u6210\u533a\u5757\uff0c\u800c\u8f83\u6162\u7684\u6700\u7ec8\u673a\u5236\u53ef\u4ee5\u5728\u5355\u72ec\u7684\u6d41\u7a0b\u4e2d\u8fd0\u884c\u4ee5\u786e\u5b9a\u533a\u5757\uff0c\u800c\u4e0d\u4f1a\u4f7f\u4ea4\u6613\u901f\u5ea6\u53d8\u6162\u6216\u505c\u987f\u7684\u98ce\u9669\u3002'),(0,r.kt)("p",null,"\u8fc7\u53bb\u5df2\u7ecf\u63d0\u51fa\u4e86\u6df7\u5408\u5171\u8bc6\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\u5b83\u88ab\u63d0\u8bae(\u73b0\u5df2\u4e0d\u5b58\u5728)\u4f5c\u4e3a\u4ee5\u592a\u574a\u8f6c\u5411",(0,r.kt)("a",{parentName:"p",href:"http://eips.ethereum.org/EIPS/eip-1011"}," EIP 1011 "),"\u7684\u6743\u76ca\u8bc1\u660e\u8fc7\u6e21\u7684\u4e00\u6b65\u3002 ",(0,r.kt)("a",{parentName:"p",href:"#casper-ffg"}," Casper FFG "),"\u3002"),(0,r.kt)("h3",{id:"babe"},"BABE"),(0,r.kt)("p",null,"BABE (Blind Assignment for Blockchain Extension) \u662f\u5728\u9a8c\u8bc1\u4eba\u8282\u70b9\u4e0e\u51b3\u5b9a\u8c01\u662f\u4ea7\u751f\u65b0\u533a\u5757\u4e4b\u95f4\u7684\u4ea7\u751f\u533a\u5757\u673a\u5236\u3002 BABE \u4e0e Ouroboros Praos \u76f8\u6bd4\uff0c\u5728\u94fe\u9009\u62e9\u89c4\u5219\u548c\u65f6\u6bb5\u8c03\u6574\u65b9\u9762\u5b58\u5728\u4e00\u4e9b\u5173\u952e\u5dee\u5f02\u3002 BABE \u6839\u636e\u62b5\u62bc\u548c\u4f7f\u7528 Polkadot ",(0,r.kt)("a",{parentName:"p",href:"learn-randomness"},"\u968f\u673a\u6027\u5468\u671f"),"\u5206\u914d\u533a\u5757\u751f\u4ea7\u63d2\u69fd\u7ed9\u9a8c\u8bc1\u4eba\u3002"),(0,r.kt)("p",null,"Validators in Polkadot will participate in a lottery in every slot that will tell them whether or not they are the block producer candidate for that slot. Slots are discrete units of time, nominally 6 seconds in length. Because of this randomness mechanism, multiple validators could be candidates for the same slot. Other times, a slot could be empty, resulting in inconsistent block time."),(0,r.kt)("h4",{id:"\u540c\u4e00\u65f6\u9699\u591a\u4e2a\u9a8c\u8bc1\u4eba"},"\u540c\u4e00\u65f6\u9699\u591a\u4e2a\u9a8c\u8bc1\u4eba"),(0,r.kt)("p",null,'\u5f53\u591a\u4e2a\u9a8c\u8bc1\u4eba\u5728\u540c\u4e00\u65f6\u9699\u4e5f\u662f\u533a\u5757\u751f\u4ea7\u4faf\u9009\u4eba\uff0c\u5168\u90e8\u4e5f\u4f1a\u4ea7\u751f\u533a\u5757\u5e76\u5e7f\u64ad\u5230\u7f51\u7edc\u3002\u90a3\u65f6\u4faf\u5c06\u4f1a\u662f\u4e00\u573a\u6bd4\u8d5b\u3002\u5176\u90a3\u4e2a\u533a\u5757\u5230\u8fbe\u7f51\u7edc\u5927\u90e8\u5206\u7684\u9a8c\u8bc1\u4eba\u5148\u83b7\u80dc\u3002\u53d6\u51b3\u4e8e\u7f51\u7edc\u62d3\u6251\u548c\u5ef6\u8fdf\uff0c\u4e24\u6761\u94fe\u90fd\u5c06\u7ee7\u7eed\u5efa\u7acb\u4e00\u5b9a\u7684\u5bb9\u91cf\uff0c\u76f4\u5230\u6700\u7ec8\u6572\u5b9a\u5e76\u622a\u65ad\u5206\u53c9\u4e3a\u6b62\u3002\u6709\u5173\u5176\u5de5\u4f5c\u539f\u7406\uff0c\u8bf7\u53c2\u89c1\u4e0b\u9762\u7684"\u5206\u53c9\u9009\u62e9"\u3002'),(0,r.kt)("h4",{id:"\u65f6\u9699\u91cc\u6ca1\u6709\u9a8c\u8bc1\u4eba"},"\u65f6\u9699\u91cc\u6ca1\u6709\u9a8c\u8bc1\u4eba"),(0,r.kt)("p",null,"\u5f53\u6ca1\u6709\u4efb\u4f55\u9a8c\u8bc1\u4eba\u5728\u968f\u673a\u62bd\u5956\u4e2d\u8fbe\u5230\u8db3\u591f\u4f4e\u7684\u8d44\u683c\u8fdb\u884c\u751f\u4ea7\u533a\u5757\u65f6\uff0c\u65f6\u9699\u4fbf\u4f1a\u6ca1\u6709\u533a\u5757\u3002\u6211\u4eec\u5728\u540e\u53f0\u901a\u8fc7\u8fd0\u884c\u8f85\u52a9\u8f6e\u5faa\u6837\u5f0f\u9a8c\u8bc1\u4eba\u9009\u62e9\u7b97\u6cd5\u6765\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\u3002\u901a\u8fc7\u9009\u62e9\u8be5\u7b97\u6cd5\u751f\u6210\u533a\u5757\u7684\u9a8c\u8bc1\u4eba\u59cb\u7ec8\u751f\u6210\u533a\u5757\uff0c\u4f46\u662f\u5982\u679c\u540c\u4e00\u65f6\u9699\u4e5f\u4ece",(0,r.kt)("a",{parentName:"p",href:"learn-randomness"}," VRF \u9009\u62e9"),"\u9a8c\u8bc1\u4eba\u751f\u6210\u4e3b\u5757\uff0c\u5219\u8fd9\u4e9b",(0,r.kt)("em",{parentName:"p"},"\u6b21\u8981"),"\u533a\u5757\u5c06\u88ab\u5ffd\u7565\u3002\u56e0\u6b64\u65f6\u9699\u53ef\u4ee5\u5177\u6709",(0,r.kt)("em",{parentName:"p"}," \u4e3b\u8981 "),"\u6216",(0,r.kt)("em",{parentName:"p"}," \u6b21\u8981 "),"\u533a\u5757\uff0c\u5e76\u4e14\u4e0d\u4f1a\u8df3\u8fc7\u4efb\u4f55\u65f6\u9699\u3002"),(0,r.kt)("p",null,"For more details on BABE, please see the ",(0,r.kt)("a",{parentName:"p",href:"https://research.web3.foundation/en/latest/polkadot/block-production/Babe.html"},"BABE paper"),"."),(0,r.kt)("h4",{id:"kusama-\u548c-polkadot-\u7684-babe-\u6b21\u751f\u5757\u7684\u533a\u522b"},"Kusama \u548c Polkadot \u7684 BABE \u6b21\u751f\u5757\u7684\u533a\u522b"),(0,r.kt)("p",null,"Both Kusama and Polkadot uses the BABE block production mechanism outlined above. However, there is a slight difference in the secondary blocks that are produced between the two networks. Polkadot attaches the VRF output to secondary blocks (and therefore every block contributes to the Epoch randomness), while Kusama keeps the VRF output off the secondary blocks (meaning only the primary blocks contribute to Epoch randomness). The Polkadot method should give stronger randomness as more inputs are collected during every Epoch. Eventually, this change should make its way into Kusama too."),(0,r.kt)("h3",{id:"grandpa-\u6700\u7ec8\u51b3\u5b9a\u6027\u5de5\u5177"},"GRANDPA: \u6700\u7ec8\u51b3\u5b9a\u6027\u5de5\u5177"),(0,r.kt)("p",null,"GRANDPA (\u57fa\u4e8e GHOST \u7684\u9012\u5f52\u7956\u5148\u6d3e\u751f\u524d\u7f00\u534f\u8bae) \u662f\u4e3a Polkadot \u4e2d\u7ee7\u94fe\u5b9e\u73b0\u7684\u6700\u7ec8\u6027\u5de5\u5177\u3002"),(0,r.kt)("p",null,"\u53ea\u89812/3\u7684\u8282\u70b9\u662f\u8bda\u5b9e\u7684\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u5f02\u6b65\u8bbe\u7f6e\u4e2d\u5904\u74061/5\u7684\u62dc\u5360\u5ead\u8282\u70b9\uff0c\u5b83\u5c31\u53ef\u4ee5\u4f5c\u4e3a\u540c\u6b65\u7684\u7f51\u7edc\u6a21\u578b\u4e2d\u7684\u4e00\u90e8\u5206\u8fd0\u884c\u3002"),(0,r.kt)("p",null,"\u4e00\u4e2a\u660e\u663e\u7684\u533a\u522b\u662f\uff0c\u5373\u4f7f\u5728\u957f\u671f\u7684\u7f51\u7edc\u5206\u533a\u6216\u5176\u4ed6\u7f51\u7edc\u6545\u969c\u4e4b\u540e\uff0cGRANDPA \u8fd8\u662f\u5728\u94fe\u4e0a\u8fbe\u6210\u534f\u8bae\uff0c\u800c\u4e0d\u662f\u5728\u533a\u5757\u4e0a\u8fbe\u6210\u534f\u8bae\uff0c\u4ece\u800c\u5927\u5927\u52a0\u5feb\u4e86\u6700\u7ec8\u6027\u786e\u5b9a\u7684\u8fc7\u7a0b\u3002"),(0,r.kt)("p",null,"\u6362\u53e5\u8bdd\u8bf4\uff0c\u4e00\u65e6\u8d85\u8fc72/3\u7684\u9a8c\u8bc1\u8005\u8bc1\u660e\u5305\u542b\u67d0\u4e2a\u5757\u7684\u94fe\uff0c\u5219\u5bfc\u81f4\u8be5\u5757\u7684\u6240\u6709\u5757\u90fd\u4f1a\u7acb\u5373\u5b8c\u6210\u3002"),(0,r.kt)("h4",{id:"\u534f\u8bae"},"\u534f\u8bae"),(0,r.kt)("p",null,"Please refer to ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/w3f/consensus/blob/master/pdf/grandpa.pdf"},"the GRANDPA paper")," for a full description of the protocol."),(0,r.kt)("h4",{id:"\u5b9e\u65bd"},"\u5b9e\u65bd"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/paritytech/substrate/blob/master/frame/grandpa/src/lib.rs"},"Substrate implementation of GRANDPA")," is part of Substrate Frame."),(0,r.kt)("h3",{id:"\u5206\u53c9\u9009\u62e9"},"\u5206\u53c9\u9009\u62e9"),(0,r.kt)("p",null,"Bringing BABE and GRANDPA together, the fork choice of Polkadot becomes clear. BABE must always build on the chain that has been finalized by GRANDPA. When there are forks after the finalized head, BABE provides probabilistic finality by building on the chain with the most primary blocks."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Best chain choice",src:a(65368).Z})),(0,r.kt)("p",null,'In the above image, the black blocks are finalized, and the yellow blocks are not. Blocks marked with a "1" are primary blocks; those marked with a "2" are secondary blocks. Even though the topmost chain is the longest chain on the latest finalized block, it does not qualify because it has fewer primaries at the time of evaluation than the one below it.'),(0,r.kt)("h2",{id:"\u5171\u8bc6\u6bd4\u8f83"},"\u5171\u8bc6\u6bd4\u8f83"),(0,r.kt)("h3",{id:"\u4e2d\u672c\u806a\u5171\u8bc6"},"\u4e2d\u672c\u806a\u5171\u8bc6"),(0,r.kt)("p",null,"Nakamoto consensus consists of the longest chain rule using proof of work as its sybil resistance mechanism and leader election."),(0,r.kt)("p",null,"Nakamoto consensus only gives us probabilistic finality. Probabilistic finality states that a block in the past is only as safe as the number of confirmations it has, or the number of blocks that have been built on top of it. As more blocks are built on top of a specific block in a Proof of Work chain, more computational work has been expended behind this particular chain. However, it does not guarantee that the chain containing the block will always remain the agreed-upon chain, since an actor with unlimited resources could potentially build a competing chain and expend enough computational resources to create a chain that did not contain a specific block. In such a situation, the longest chain rule employed in Bitcoin and other proof of work chains would move to this new chain as the canonical one."),(0,r.kt)("h3",{id:"pbft--tendermint"},"PBFT / Tendermint"),(0,r.kt)("p",null,"Please see the ",(0,r.kt)("a",{parentName:"p",href:"learn-comparisons-cosmos#consensus"},"relevant section")," in the Cosmos comparison article."),(0,r.kt)("h3",{id:"casper-ffg"},"Casper FFG"),(0,r.kt)("p",null,"The two main differences between GRANDPA and Casper FFG are:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5728GRANDPA\u4e2d\uff0c\u4e0d\u540c\u7684\u9009\u6c11\u53ef\u4ee5\u540c\u65f6\u4e3a\u4e0d\u540c\u9ad8\u5ea6\u7684\u533a\u5757\u6295\u7968"),(0,r.kt)("li",{parentName:"ul"},"GRANDPA \u4f9d\u9760\u6700\u7ec8\u7684\u533a\u5757\u6765\u5f71\u54cd\u5e95\u5c42\u533a\u5757\u751f\u4ea7\u673a\u5236\u7684\u5206\u53c9\u9009\u62e9\u89c4\u5219")),(0,r.kt)("h2",{id:"\u8d44\u6e90"},"\u8d44\u6e90"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://research.web3.foundation/en/latest/polkadot/block-production/Babe.html"},"BABE paper")," - The academic description of the BABE protocol."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/w3f/consensus/blob/master/pdf/grandpa.pdf"},"GRANDPA paper")," - The academic description of the GRANDPA finality gadget. Contains formal proofs of the algorithm."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/paritytech/finality-grandpa"},"Rust implementation")," - The reference implementation and the accompanying ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/paritytech/substrate/blob/master/frame/grandpa/src/lib.rs"},"Substrate pallet"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.crowdcast.io/e/polkadot-block-production"},"Block Production and Finalization in Polkadot")," - An explanation of how BABE and GRANDPA work together to produce and finalize blocks on Kusama, with Bill Laboon."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.youtube.com/watch?v=1CuTSluL7v4&t=4s"},"Block Production and Finalization in Polkadot: Understanding the BABE and GRANDPA Protocols")," - An academic talk by Bill Laboon, given at MIT Cryptoeconomic Systems 2020, describing Polkadot's hybrid consensus model in-depth.")))}p.isMDXComponent=!0},65368:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const n=a.p+"assets/images/best_chain-52a3da00fb2f804a198c73690fcedc4f.png"}}]);