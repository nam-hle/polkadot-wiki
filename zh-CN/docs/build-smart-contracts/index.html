<!doctype html>
<html lang="zh-CN" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/polkadot-wiki/zh-CN/blog/rss.xml" title="Guide Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/polkadot-wiki/zh-CN/blog/atom.xml" title="Guide Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Guide" href="/polkadot-wiki/zh-CN/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Muli&display=swap">
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.js"></script>
<script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js" onload="addBackToTop()" defer="defer"></script>
<script src="/polkadot-wiki/js/custom.js"></script>
<script src="/polkadot-wiki/js/klaro-config.js"></script>
<script src="/polkadot-wiki/js/klaro.js"></script>
<script src="/polkadot-wiki/js/clipboard.min.js"></script>
<script src="/polkadot-wiki/js/copycode.js"></script><title data-react-helmet="true">智能合约 · Guide</title><meta data-react-helmet="true" property="og:url" content="https://nam-hle.github.io//polkadot-wiki/zh-CN/docs/build-smart-contracts"><meta data-react-helmet="true" name="docsearch:language" content="zh-CN"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="智能合约 · Guide"><meta data-react-helmet="true" name="description" content="The Polkadot Relay Chain will not support smart contracts natively. However, parachains on Polkadot will support smart contracts. There are already announced projects such as Edgeware, and thanks to the Substrate built-in contract pallet, it is likely that more parachains will support this feature."><meta data-react-helmet="true" property="og:description" content="The Polkadot Relay Chain will not support smart contracts natively. However, parachains on Polkadot will support smart contracts. There are already announced projects such as Edgeware, and thanks to the Substrate built-in contract pallet, it is likely that more parachains will support this feature."><link data-react-helmet="true" rel="shortcut icon" href="/polkadot-wiki/zh-CN/img/Kusama_Canary_white.png"><link data-react-helmet="true" rel="canonical" href="https://nam-hle.github.io//polkadot-wiki/zh-CN/docs/build-smart-contracts"><link data-react-helmet="true" rel="alternate" href="https://nam-hle.github.io//polkadot-wiki/docs/build-smart-contracts" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://nam-hle.github.io//polkadot-wiki/zh-CN/docs/build-smart-contracts" hreflang="zh-CN"><link data-react-helmet="true" rel="alternate" href="https://nam-hle.github.io//polkadot-wiki/docs/build-smart-contracts" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/polkadot-wiki/zh-CN/assets/css/styles.feaf174d.css">
<link rel="preload" href="/polkadot-wiki/zh-CN/assets/js/runtime~main.53b8a31f.js" as="script">
<link rel="preload" href="/polkadot-wiki/zh-CN/assets/js/main.c6ab08b1.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">跳到主要内容</a></div><div class="announcementBar_3WsW" style="background-color:#e6007a;color:#000" role="banner"><div class="announcementBarContent_3EUC"><a id="support_us" href="/docs/contributing" title="Contribute to this wiki" data-ribbon="Contribute to this wiki">
          Contribute to this wiki
        </a></div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/polkadot-wiki/zh-CN/"><img src="/polkadot-wiki/zh-CN/img/Kusama_logotype_white_large.png" alt="Guide" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/polkadot-wiki/zh-CN/img/Kusama_logotype_white_large.png" alt="Guide" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Guide</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/polkadot-wiki/zh-CN/docs/kusama-getting-started">Get Started</a><a class="navbar__item navbar__link" href="/polkadot-wiki/zh-CN/docs/kusama-index">Docs</a><div class="searchWrapper_3rmH"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span></button></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>中文</span></span></a><ul class="dropdown__menu"><li><a href="/polkadot-wiki/docs/build-smart-contracts" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">English</a></li><li><a href="/polkadot-wiki/zh-CN/docs/build-smart-contracts" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">中文</a></li><li><a href="https://crowdin.com/project/polkadot-wiki" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help us translate</a></li></ul></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/polkadot-wiki/zh-CN/"><img src="/polkadot-wiki/zh-CN/img/Kusama_logotype_white_large.png" alt="Guide" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/polkadot-wiki/zh-CN/img/Kusama_logotype_white_large.png" alt="Guide" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Guide</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/polkadot-wiki/zh-CN/docs/kusama-getting-started">Get Started</a></li><li class="menu__list-item"><a class="menu__link" href="/polkadot-wiki/zh-CN/docs/kusama-index">Docs</a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/polkadot-wiki/docs/build-smart-contracts" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">English</a></li><li class="menu__list-item"><a href="/polkadot-wiki/zh-CN/docs/build-smart-contracts" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">中文</a></li><li class="menu__list-item"><a href="https://crowdin.com/project/polkadot-wiki" target="_blank" rel="noopener noreferrer" class="menu__link">Help us translate</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><main class="docMainContainer_3ufF docMainContainerEnhanced_3NYZ"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">智能合约</h1></header><div class="markdown"><p>The Polkadot Relay Chain will not support smart contracts natively. However, parachains on Polkadot will support smart contracts. There are already announced projects such as <a href="https://edgewa.re" target="_blank" rel="noopener noreferrer">Edgeware</a>, and thanks to the Substrate built-in <a href="https://substrate.dev/rustdocs/v3.0.0/pallet_contracts/index.html" target="_blank" rel="noopener noreferrer">contract pallet</a>, it is likely that more parachains will support this feature.</p><p>此外，还有一个 EVM 模块可以让平行链实现以太坊虚拟机，得以支持几乎以太坊合约的直接接口。一些项目用到了<a href="https://edgewa.re" target="_blank" rel="noopener noreferrer">Edgeware</a>，<a href="https://moonbeam.network/" target="_blank" rel="noopener noreferrer">Moonbeam</a>和<a href="https://github.com/paritytech/frontier" target="_blank" rel="noopener noreferrer">Frontier</a>这些方法。</p><p><a href="https://www.youtube.com/watch?v=fKHkFBXaUxQ" target="_blank" rel="noopener noreferrer">这里</a>提供了有关 Polkadot 和 Kusama 的智能合约情况摘要的视频版本。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="资源"></a>资源<a class="hash-link" href="#资源" title="标题的直接链接">#</a></h2><p>如果开发者想要开始在基于 Substrate 的平行链上开发并部署智能合约，可以参考这个列表的资源：</p><ul><li><a href="https://contracts.edgewa.re" target="_blank" rel="noopener noreferrer">Edgeware 合约</a> - Edgeware合约的文档。</li><li><a href="https://github.com/paritytech/ink" target="_blank" rel="noopener noreferrer">ink!</a> - Parity 提供的编写智能合约的ink。</li><li><a href="https://substrate.dev/substrate-contracts-workshop/#/" target="_blank" rel="noopener noreferrer">Substrate 合约工作坊</a> - 指导您使用<code>ink!</code>编写和部署ERC20令牌的基础知识。</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="例子"></a>例子<a class="hash-link" href="#例子" title="标题的直接链接">#</a></h2><p>以下收集的是社区中关于<code>ink!</code>的一些智能合约示例。您正在研究智能合约示例吗？请联系我们将其添加到此页面！</p><ul><li><a href="https://github.com/JesseAbram/foRust/" target="_blank" rel="noopener noreferrer">Ownable</a> - OpenZeppelin <code>Ownable</code>合约的端口。</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="存储空间的租用"></a>存储空间的租用<a class="hash-link" href="#存储空间的租用" title="标题的直接链接">#</a></h2><p>存储租金限制了一个合约可以在区块链存储上所占用的空间。</p><p>部署到链上的合同会生成一个代码哈希，可以从中创建链的新实例，但是当前没有租金适用于代码哈希本身。租金仅适用于具有自己的<em>合约帐户</em>的本合约实例。当前，部署代码哈希将用到一笔一次性的字节费应用于交易，但是没有反复性的开销。</p><p>合约实例的帐户按其帐户使用的存储量按比例收费。当合约的余额低于指定的限额时，合约的帐户将变成“墓碑” (合约当前状态的哈希值)，并且将清理其存储。处于“墓碑”状态的合约，可以通过提供转为“墓碑”状态后被清除的数据从而得到恢复，同时也要提供保持合同有效性所需的资金。该项费用将追溯到错过的租期。</p><p>如果区块链生产商或链上的常规用户认为用来租用智能合约的资金花完了，他们可以poke一下该智能合约。这将启动清理过程，<em>poker</em>将收取发起者的费用。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="开放只能合约和平行链的区别"></a>开放只能合约和平行链的区别<a class="hash-link" href="#开放只能合约和平行链的区别" title="标题的直接链接">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="抽象层"></a>抽象层<a class="hash-link" href="#抽象层" title="标题的直接链接">#</a></h3><p>编写智能合约时，您正在创建将被部署并关联到特定链地址的指令。</p><p>相比之下，运行模块是链状态转换的全部逻辑 (所谓的a状态转换函数)。</p><p>智能合约必须有意识地实现可升级性，而平行链则有能力完全通过根命令或通过管理面板来交换代码。</p><p>当您构建智能合约时，它将最终被部署到具有其自身环境的目标链中。平行链允许开发人员声明自己的链环境，甚至允许其他人为其编写智能合约。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="gas-费用"></a>Gas 费用<a class="hash-link" href="#gas-费用" title="标题的直接链接">#</a></h3><p>智能合约必须找到一种方法来限制自己的执行，否则完整的节点很容易受到DOS攻击。例如，智能合约中的无限循环可能会消耗整个链的计算资源，从而阻止其他人使用它。<a href="https://en.wikipedia.org/wiki/Halting_problem" target="_blank" rel="noopener noreferrer">停机问题</a>表明使用足够强大的语言，还是无法提前知道程序是否将停止执行。某些平台（例如比特币）通过提供一种非常受限制的脚本语言来解决此限制。以太坊等其他平台则向智能合约索取“燃气”，以收取执行其代码的权利。如果智能合约确实进入了永不终止的状态，那么它最终将耗尽燃气费，停止执行，并且将回退任何由智能合约产生的状态转换。</p><p>平行链可以采用任意且强大的编程语言，且其自身逻辑中不采用gas概念。这意味着开发者更易于实现部分功能，但也意味着无终止条件的循环等结构将<em>永不</em>能实现。将某些例如可能无限运行的复杂循环的逻辑，置于非智能合约层，或者尝试将它们完全消除，往往是更明智的选择。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="资源-1"></a>资源<a class="hash-link" href="#资源-1" title="标题的直接链接">#</a></h2><ul><li><a href="https://stackoverflow.com/a/56041305" target="_blank" rel="noopener noreferrer">应该在什么时候构建 Substrate runtime 或构建 Substrate 智能合约</a> - 从技术角度回答了开发者什么时候可以选择开发 runtime 或智能合约。</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/w3f/polkadot-wiki/edit/master/docs/build-smart-contracts.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="文档分页导航"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#资源" class="table-of-contents__link">资源</a></li><li><a href="#例子" class="table-of-contents__link">例子</a></li><li><a href="#存储空间的租用" class="table-of-contents__link">存储空间的租用</a></li><li><a href="#开放只能合约和平行链的区别" class="table-of-contents__link">开放只能合约和平行链的区别</a><ul><li><a href="#抽象层" class="table-of-contents__link">抽象层</a></li><li><a href="#gas-费用" class="table-of-contents__link">Gas 费用</a></li></ul></li><li><a href="#资源-1" class="table-of-contents__link">资源</a></li></ul></div></div></div></div></main></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/polkadot-wiki/zh-CN/" class="nav-home"><img src="/polkadot-wiki/zh-CN/img/Kusama_Canary_white.png" alt="Guide" width="66" height="58"></a><div><p class="homepage-font">Kusama is an experimental <br>community research and<br> development network.</p><a href="/polkadot-wiki/zh-CN/docs/kusama-index" target="_blank" class="homepage-font">Docs</a><a href="https://kusama.network/" target="_blank" class="homepage-font">Kusama Network</a><a href="https://twitter.com/kusamanetwork" target="_blank" rel="noreferrer noopener" class="homepage-font">Twitter</a><a href="https://matrix.to/#/!HfRYKXBoPmDBCAWUEJ:polkadot.builders" target="_blank" rel="noreferrer noopener" class="homepage-font">Kusama Watercooler (Element Chat)</a></div><a href="/kusama-wiki.zip" target="_blank" rel="noreferrer noopener">Download this Guide as PDF</a></section><section class="row"><div class="copyright homepage-font">© 2021 Web3 Foundation</div><a class="item homepage-font" href="https://polkadot.network/privacy/">Privacy Policy</a><a class="item homepage-font" href="#" id="cookie-settings">Cookie Settings</a></section></footer></div>
<script src="/polkadot-wiki/zh-CN/assets/js/runtime~main.53b8a31f.js"></script>
<script src="/polkadot-wiki/zh-CN/assets/js/main.c6ab08b1.js"></script>
</body>
</html>