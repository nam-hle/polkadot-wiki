<!doctype html>
<html lang="zh-CN" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/polkadot-wiki/zh-CN/blog/rss.xml" title="Guide Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/polkadot-wiki/zh-CN/blog/atom.xml" title="Guide Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Guide" href="/polkadot-wiki/zh-CN/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Muli&display=swap">
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.js"></script>
<script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js" onload="addBackToTop()" defer="defer"></script>
<script src="/polkadot-wiki/js/custom.js"></script>
<script src="/polkadot-wiki/js/klaro-config.js"></script>
<script src="/polkadot-wiki/js/klaro.js"></script>
<script src="/polkadot-wiki/js/clipboard.min.js"></script>
<script src="/polkadot-wiki/js/copycode.js"></script><title data-react-helmet="true">随机性 · Guide</title><meta data-react-helmet="true" property="og:url" content="https://nam-hle.github.io//polkadot-wiki/zh-CN/docs/learn-randomness"><meta data-react-helmet="true" name="docsearch:language" content="zh-CN"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="随机性 · Guide"><meta data-react-helmet="true" name="description" content="权益证明(PoS)区块链的随机性对于验证人责任的公平并且不可预测的分配是非常重要。 ，因为计算机是确定性设备，所以它们在随机数方面很差(同样输入总是会产生同样输出)。大部份人通常在计算机上(例如游戏应用程序中)称随机数实际上是伪随机- 也就是说它们依赖用户或其他类型的Oracle 提供足够随机的seed，例如气象站的大气噪声, 心跳率或什至熔岩灯，就可以从中产生一系列看似随机的数字。但是如果给相同的种子，结果将会是一样。"><meta data-react-helmet="true" property="og:description" content="权益证明(PoS)区块链的随机性对于验证人责任的公平并且不可预测的分配是非常重要。 ，因为计算机是确定性设备，所以它们在随机数方面很差(同样输入总是会产生同样输出)。大部份人通常在计算机上(例如游戏应用程序中)称随机数实际上是伪随机- 也就是说它们依赖用户或其他类型的Oracle 提供足够随机的seed，例如气象站的大气噪声, 心跳率或什至熔岩灯，就可以从中产生一系列看似随机的数字。但是如果给相同的种子，结果将会是一样。"><link data-react-helmet="true" rel="shortcut icon" href="/polkadot-wiki/zh-CN/img/Kusama_Canary_white.png"><link data-react-helmet="true" rel="canonical" href="https://nam-hle.github.io//polkadot-wiki/zh-CN/docs/learn-randomness"><link data-react-helmet="true" rel="alternate" href="https://nam-hle.github.io//polkadot-wiki/docs/learn-randomness" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://nam-hle.github.io//polkadot-wiki/zh-CN/docs/learn-randomness" hreflang="zh-CN"><link data-react-helmet="true" rel="alternate" href="https://nam-hle.github.io//polkadot-wiki/docs/learn-randomness" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/polkadot-wiki/zh-CN/assets/css/styles.feaf174d.css">
<link rel="preload" href="/polkadot-wiki/zh-CN/assets/js/runtime~main.53b8a31f.js" as="script">
<link rel="preload" href="/polkadot-wiki/zh-CN/assets/js/main.c6ab08b1.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">跳到主要内容</a></div><div class="announcementBar_3WsW" style="background-color:#e6007a;color:#000" role="banner"><div class="announcementBarContent_3EUC"><a id="support_us" href="/docs/contributing" title="Contribute to this wiki" data-ribbon="Contribute to this wiki">
          Contribute to this wiki
        </a></div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/polkadot-wiki/zh-CN/"><img src="/polkadot-wiki/zh-CN/img/Kusama_logotype_white_large.png" alt="Guide" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/polkadot-wiki/zh-CN/img/Kusama_logotype_white_large.png" alt="Guide" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Guide</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/polkadot-wiki/zh-CN/docs/kusama-getting-started">Get Started</a><a class="navbar__item navbar__link" href="/polkadot-wiki/zh-CN/docs/kusama-index">Docs</a><div class="searchWrapper_3rmH"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span></button></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>中文</span></span></a><ul class="dropdown__menu"><li><a href="/polkadot-wiki/docs/learn-randomness" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">English</a></li><li><a href="/polkadot-wiki/zh-CN/docs/learn-randomness" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">中文</a></li><li><a href="https://crowdin.com/project/polkadot-wiki" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help us translate</a></li></ul></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/polkadot-wiki/zh-CN/"><img src="/polkadot-wiki/zh-CN/img/Kusama_logotype_white_large.png" alt="Guide" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/polkadot-wiki/zh-CN/img/Kusama_logotype_white_large.png" alt="Guide" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Guide</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/polkadot-wiki/zh-CN/docs/kusama-getting-started">Get Started</a></li><li class="menu__list-item"><a class="menu__link" href="/polkadot-wiki/zh-CN/docs/kusama-index">Docs</a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/polkadot-wiki/docs/learn-randomness" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">English</a></li><li class="menu__list-item"><a href="/polkadot-wiki/zh-CN/docs/learn-randomness" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">中文</a></li><li class="menu__list-item"><a href="https://crowdin.com/project/polkadot-wiki" target="_blank" rel="noopener noreferrer" class="menu__link">Help us translate</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><main class="docMainContainer_3ufF docMainContainerEnhanced_3NYZ"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">随机性</h1></header><div class="markdown"><p>权益证明(PoS)区块链的随机性对于验证人责任的公平并且不可预测的分配是非常重要。 ，因为计算机是确定性设备，所以它们在随机数方面很差(同样输入总是会产生同样输出)。大部份人通常在计算机上(例如游戏应用程序中)称随机数实际上是<em>伪随机</em>- 也就是说它们依赖用户或其他类型的<em>Oracle</em> 提供足够随机的<em>seed</em>，例如<a href="https://www.random.org/randomness/" target="_blank" rel="noopener noreferrer">气象站的大气噪声</a>, <a href="https://mdpi.altmetric.com/details/47574324" target="_blank" rel="noopener noreferrer">心跳率</a>或什至<a href="https://en.wikipedia.org/wiki/Lavarand" target="_blank" rel="noopener noreferrer">熔岩灯</a>，就可以从中产生一系列看似随机的数字。但是如果给相同的种子，结果将会是一样。</p><p>这些输入将根据时间和空间而变化，但是不可能将相同的结果输入到全球特定区块链的所有节点中。如果节点获得不同的输入以创建区块，则会发生分叉。显然现实世界中的熵不适合用作区块链随机性的种子。</p><p>至今区块链有二种可用的随机性方法: RANDAO 和 VRF。 Polkadot 使用 VRF。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="vrf"></a>VRF<a class="hash-link" href="#vrf" title="标题的直接链接">#</a></h2><p>可验证随机函数(VRF)是数学运算，需要一些输入并产生随机数以及该提交者生成该随机数的真实性证明。任何挑战者都可以验证该证明，以确保随机数生成有效。</p><p>Polkadot 中使用的 VRF 与 Ouroboros Praos 中的大致相同。 Ouroboros 随机性对于块生产来说是安全并对 BABE 来说效果很好。它们不同之处在于 Polkadot 的 VRF 不依赖于中央时钟(问题变了-谁的中央时钟?)，而是取决于它自己过去结果来确定现在和将来的结果，并且它使用插槽数字作为时钟模拟器估计时间。</p><p>具体操作如下:</p><p>Slots are discrete units of time six seconds in length. Each slot can contain a block, but may not. Slots make up epochs - on Polkadot, 2400 slots make one epoch, which makes epochs four hours long.</p><p>In every slot, each validator &quot;rolls a die&quot;. They execute a function (the VRF) that takes as input the following:</p><ul><li><strong>The &quot;secret key&quot;,</strong> a key specifically made for these die rolls.</li><li><strong>An epoch randomness value,</strong> which is the hash of VRF values from the blocks in the epoch before last (N-2), so past randomness has an effect on the current pending randomness (N).</li><li><strong>时隙号</strong></li></ul><p><img src="/polkadot-wiki/zh-CN/assets/images/VRF_babe-12768d3392ba939b5f4c4955556d12c2.png"></p><p>输出为两个数值: <code>RESULT</code>(随机值)和<code>PROOF</code>(证明随机数值已正确生成的证明)。</p><p>然后将<code>RESULT</code>与该协议实现中定义的<em>阈值 (threshold) </em>(在 Polkadot Host)进行比较。如果该值小于阈值，那么掷此数字的验证人将是可在该插槽的区块生产候选者。然后，验证人尝试创建一个区块，并将该区块与先前获得的<code>PROOF</code>和<code>RESULT</code>一起提交到网络中。</p><p>The fishermen - nodes watching the network for collator and validator wrongdoing - will be verifying Relay Chain blocks. Since an illegal roll will generate an illegal block, and since fishermen will have access to the <code>RESULT</code> and <code>PROOF</code> in every block produced by a validator, it&#x27;ll be easy for them to automatically report cheating validators.</p><p>总结: 在 VRF 中，每个验证人都会为自己掷出一个数字，并根据阈值对其进行检查，如果随机掷骰低于该阈值，则会生產區块。 钓鱼人监察网络并报告不良行为验证这些掷骰的有效性，并向系统报告任何作弊行为(例如尽管掷出的人数超过阈值，但有人假装成块生产區塊者)。</p><p>精明的读者会注意到，这种工作方式某些时隙可能没有验证人作为区块链生产者候选者，因为所有验证候选者的得分都太高而错过了阈值值。我们在<a href="/polkadot-wiki/zh-CN/docs/learn-consensus"> wiki 共识页面</a>中说明了如何解决此问题，并确保 Polkadot 出块时间保持在恒定时间。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="randao"></a>RANDAO<a class="hash-link" href="#randao" title="标题的直接链接">#</a></h2><p><a href="https://github.com/randao/randao" target="_blank" rel="noopener noreferrer"> RANDAO </a> - RANDAO 要求每个验证人通过对某些种子执行一系列哈希操作来进行准备。 验证人然后在一个回合中发布最终的哈希值，加上随机数是从每个参与者进入游戏中得出。只要有一名诚实的验证人参加，随机性就被认为是安全（在经济上进行攻击是不可行）。Polkadot 不选用 VRF 的随机性方法是因为从每个区块生产者处揭示每个时隙的哈希值需要二次带宽或至少二次计算。</p><p>RANDAO 可选增加VDF。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="vdfs"></a>VDFs<a class="hash-link" href="#vdfs" title="标题的直接链接">#</a></h3><p><a href="https://vdfresearch.org/" target="_blank" rel="noopener noreferrer">Verifiable Delay Functions</a> are computations that take a prescribed duration of time to complete, even on parallel computers. They produce unique output that can be independently and efficiently verified in a public setting. By feeding the result of RANDAO into a VDF, a delay is introduced that renders any attacker&#x27;s attempt at influencing the current randomness obsolete.</p><p>VDFs will likely be implemented through ASIC devices that need to be run separately from the other types of nodes. Although only one is enough to keep the system secure, and they will be open source and distributed at nearly no charge, running them is neither cheap nor incentivized, producing unneccessary friction for users of the blockchains opting for this method.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="资源"></a>资源<a class="hash-link" href="#资源" title="标题的直接链接">#</a></h2><ul><li><a href="https://w3f-research.readthedocs.io/en/latest/polkadot/block-production/Babe.html" target="_blank" rel="noopener noreferrer">Polkadot&#x27;s research on blockchain randomness and sortition</a> - contains reasoning for choices made along with proofs</li><li><a href="https://github.com/paritytech/ink/issues/57" target="_blank" rel="noopener noreferrer">关于 Polkadot 中使用随机性的讨论</a> - W3F 研究人员讨论了 Polkadot 中的随机性，何时用以及在哪些假设下进行。</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/w3f/polkadot-wiki/edit/master/docs/learn-randomness.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="文档分页导航"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#vrf" class="table-of-contents__link">VRF</a></li><li><a href="#randao" class="table-of-contents__link">RANDAO</a><ul><li><a href="#vdfs" class="table-of-contents__link">VDFs</a></li></ul></li><li><a href="#资源" class="table-of-contents__link">资源</a></li></ul></div></div></div></div></main></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/polkadot-wiki/zh-CN/" class="nav-home"><img src="/polkadot-wiki/zh-CN/img/Kusama_Canary_white.png" alt="Guide" width="66" height="58"></a><div><p class="homepage-font">Kusama is an experimental <br>community research and<br> development network.</p><a href="/polkadot-wiki/zh-CN/docs/kusama-index" target="_blank" class="homepage-font">Docs</a><a href="https://kusama.network/" target="_blank" class="homepage-font">Kusama Network</a><a href="https://twitter.com/kusamanetwork" target="_blank" rel="noreferrer noopener" class="homepage-font">Twitter</a><a href="https://matrix.to/#/!HfRYKXBoPmDBCAWUEJ:polkadot.builders" target="_blank" rel="noreferrer noopener" class="homepage-font">Kusama Watercooler (Element Chat)</a></div><a href="/kusama-wiki.zip" target="_blank" rel="noreferrer noopener">Download this Guide as PDF</a></section><section class="row"><div class="copyright homepage-font">© 2021 Web3 Foundation</div><a class="item homepage-font" href="https://polkadot.network/privacy/">Privacy Policy</a><a class="item homepage-font" href="#" id="cookie-settings">Cookie Settings</a></section></footer></div>
<script src="/polkadot-wiki/zh-CN/assets/js/runtime~main.53b8a31f.js"></script>
<script src="/polkadot-wiki/zh-CN/assets/js/main.c6ab08b1.js"></script>
</body>
</html>